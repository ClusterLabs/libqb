<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>libqb: qbipcs.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libqb
   &#160;<span id="projectnumber">1.0.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_99176029e6245da7be482686d42cbcde.html">qb</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">qbipcs.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Server IPC API.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;sys/uio.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="qbipc__common_8h.html">qb/qbipc_common.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="qbloop_8h.html">qb/qbloop.h</a>&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for qbipcs.h:</div>
<div class="dyncontent">
<div class="center"><img src="qbipcs_8h__incl.png" border="0" usemap="#qbipcs_8h" alt=""/></div>
<map name="qbipcs_8h" id="qbipcs_8h">
<area shape="rect" id="node4" href="qbipc__common_8h.html" title="common types and definitions " alt="" coords="219,80,357,107"/><area shape="rect" id="node6" href="qbloop_8h.html" title="Main loop manages timers, jobs and polling sockets. " alt="" coords="382,80,471,107"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structqb__ipcs__stats.html">qb_ipcs_stats</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structqb__ipcs__connection__stats.html">qb_ipcs_connection_stats</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structqb__ipcs__connection__stats__2.html">qb_ipcs_connection_stats_2</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structqb__ipcs__poll__handlers.html">qb_ipcs_poll_handlers</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structqb__ipcs__service__handlers.html">qb_ipcs_service_handlers</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:acc1fc937960ad337da002ef5564722b3"><td class="memItemLeft" align="right" valign="top">typedef struct qb_ipcs_connection&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a></td></tr>
<tr class="separator:acc1fc937960ad337da002ef5564722b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a098e863e2720e4611d49621487c9ca9d"><td class="memItemLeft" align="right" valign="top">typedef struct qb_ipcs_service&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a></td></tr>
<tr class="separator:a098e863e2720e4611d49621487c9ca9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88f172c8df3409a07a5829719b26a4c9"><td class="memItemLeft" align="right" valign="top">typedef int32_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a88f172c8df3409a07a5829719b26a4c9">qb_ipcs_dispatch_fn_t</a> )(int32_t fd, int32_t revents, void *data)</td></tr>
<tr class="separator:a88f172c8df3409a07a5829719b26a4c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa51bd9aad2e758253ec5bb8c3bc7ef2a"><td class="memItemLeft" align="right" valign="top">typedef int32_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#aa51bd9aad2e758253ec5bb8c3bc7ef2a">qb_ipcs_dispatch_add_fn</a> )(enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a> p, int32_t fd, int32_t events, void *data, <a class="el" href="qbipcs_8h.html#a88f172c8df3409a07a5829719b26a4c9">qb_ipcs_dispatch_fn_t</a> fn)</td></tr>
<tr class="separator:aa51bd9aad2e758253ec5bb8c3bc7ef2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cbfafeadb284664638c2f6f52b989ad"><td class="memItemLeft" align="right" valign="top">typedef int32_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a1cbfafeadb284664638c2f6f52b989ad">qb_ipcs_dispatch_mod_fn</a> )(enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a> p, int32_t fd, int32_t events, void *data, <a class="el" href="qbipcs_8h.html#a88f172c8df3409a07a5829719b26a4c9">qb_ipcs_dispatch_fn_t</a> fn)</td></tr>
<tr class="separator:a1cbfafeadb284664638c2f6f52b989ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeef1a99bacd72c8ba3459343bd79b6fa"><td class="memItemLeft" align="right" valign="top">typedef int32_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#aeef1a99bacd72c8ba3459343bd79b6fa">qb_ipcs_dispatch_del_fn</a> )(int32_t fd)</td></tr>
<tr class="separator:aeef1a99bacd72c8ba3459343bd79b6fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a219a902ed4651c7106aee661c6cd334b"><td class="memItemLeft" align="right" valign="top">typedef int32_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a219a902ed4651c7106aee661c6cd334b">qb_ipcs_job_add_fn</a> )(enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a> p, void *data, <a class="el" href="qbloop_8h.html#a16a3fefe47905f03180a87d40e8bc331">qb_loop_job_dispatch_fn</a> dispatch_fn)</td></tr>
<tr class="separator:a219a902ed4651c7106aee661c6cd334b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80564e14961186d8d1190f60ca4fce04"><td class="memItemLeft" align="right" valign="top">typedef int32_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a80564e14961186d8d1190f60ca4fce04">qb_ipcs_connection_accept_fn</a> )(<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c, uid_t uid, gid_t gid)</td></tr>
<tr class="memdesc:a80564e14961186d8d1190f60ca4fce04"><td class="mdescLeft">&#160;</td><td class="mdescRight">This callback is to check whether you want to accept a new connection.  <a href="#a80564e14961186d8d1190f60ca4fce04">More...</a><br/></td></tr>
<tr class="separator:a80564e14961186d8d1190f60ca4fce04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec67497f3813dfc82793c0c16c6c9b76"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#aec67497f3813dfc82793c0c16c6c9b76">qb_ipcs_connection_created_fn</a> )(<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c)</td></tr>
<tr class="memdesc:aec67497f3813dfc82793c0c16c6c9b76"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is called after a new connection has been created.  <a href="#aec67497f3813dfc82793c0c16c6c9b76">More...</a><br/></td></tr>
<tr class="separator:aec67497f3813dfc82793c0c16c6c9b76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0f284652f8b9a7a319c0c402f21a6be"><td class="memItemLeft" align="right" valign="top">typedef int32_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#af0f284652f8b9a7a319c0c402f21a6be">qb_ipcs_connection_closed_fn</a> )(<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c)</td></tr>
<tr class="memdesc:af0f284652f8b9a7a319c0c402f21a6be"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is called after a connection has been disconnected.  <a href="#af0f284652f8b9a7a319c0c402f21a6be">More...</a><br/></td></tr>
<tr class="separator:af0f284652f8b9a7a319c0c402f21a6be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39900be9ce9356aaf63e58608f9d16ad"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a39900be9ce9356aaf63e58608f9d16ad">qb_ipcs_connection_destroyed_fn</a> )(<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c)</td></tr>
<tr class="memdesc:a39900be9ce9356aaf63e58608f9d16ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is called just before a connection is freed.  <a href="#a39900be9ce9356aaf63e58608f9d16ad">More...</a><br/></td></tr>
<tr class="separator:a39900be9ce9356aaf63e58608f9d16ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab12a3f8cb86eea870ac8e382ccafb070"><td class="memItemLeft" align="right" valign="top">typedef int32_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#ab12a3f8cb86eea870ac8e382ccafb070">qb_ipcs_msg_process_fn</a> )(<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c, void *data, size_t size)</td></tr>
<tr class="memdesc:ab12a3f8cb86eea870ac8e382ccafb070"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the message processing calback.  <a href="#ab12a3f8cb86eea870ac8e382ccafb070">More...</a><br/></td></tr>
<tr class="separator:ab12a3f8cb86eea870ac8e382ccafb070"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ac961fd31bca0eda50c87880c73cc5989"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#ac961fd31bca0eda50c87880c73cc5989">qb_ipcs_rate_limit</a> { <br/>
&#160;&#160;<a class="el" href="qbipcs_8h.html#ac961fd31bca0eda50c87880c73cc5989a0b0b603de775dcdf996e53d15dde5541">QB_IPCS_RATE_FAST</a>, 
<a class="el" href="qbipcs_8h.html#ac961fd31bca0eda50c87880c73cc5989a840a10f4174748a340e774d9db8cc3de">QB_IPCS_RATE_NORMAL</a>, 
<a class="el" href="qbipcs_8h.html#ac961fd31bca0eda50c87880c73cc5989a89de3f5c2cabd1f83dedb1e89d8e3f17">QB_IPCS_RATE_SLOW</a>, 
<a class="el" href="qbipcs_8h.html#ac961fd31bca0eda50c87880c73cc5989acfd8268d58b87896daa74a39ffae82d4">QB_IPCS_RATE_OFF</a>, 
<br/>
&#160;&#160;<a class="el" href="qbipcs_8h.html#ac961fd31bca0eda50c87880c73cc5989a02e6f359fa28ae101f7bfc274128a3e5">QB_IPCS_RATE_OFF_2</a>
<br/>
 }</td></tr>
<tr class="separator:ac961fd31bca0eda50c87880c73cc5989"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0a5761733d99b71d8e2f24b10f3846de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a0a5761733d99b71d8e2f24b10f3846de">qb_ipcs_create</a> (const char *name, int32_t service_id, enum <a class="el" href="qbipc__common_8h.html#a8b0e590c38ee39628866bf02b505c334">qb_ipc_type</a> type, struct <a class="el" href="structqb__ipcs__service__handlers.html">qb_ipcs_service_handlers</a> *handlers)</td></tr>
<tr class="memdesc:a0a5761733d99b71d8e2f24b10f3846de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new IPC server.  <a href="#a0a5761733d99b71d8e2f24b10f3846de">More...</a><br/></td></tr>
<tr class="separator:a0a5761733d99b71d8e2f24b10f3846de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab717eb87bf57381919f8e8a67dcb0543"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#ab717eb87bf57381919f8e8a67dcb0543">qb_ipcs_ref</a> (<a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *s)</td></tr>
<tr class="memdesc:ab717eb87bf57381919f8e8a67dcb0543"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increase the reference counter on the service object.  <a href="#ab717eb87bf57381919f8e8a67dcb0543">More...</a><br/></td></tr>
<tr class="separator:ab717eb87bf57381919f8e8a67dcb0543"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58fcf69e99144c4798a6da997bc1cba4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a58fcf69e99144c4798a6da997bc1cba4">qb_ipcs_unref</a> (<a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *s)</td></tr>
<tr class="memdesc:a58fcf69e99144c4798a6da997bc1cba4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrease the reference counter on the service object.  <a href="#a58fcf69e99144c4798a6da997bc1cba4">More...</a><br/></td></tr>
<tr class="separator:a58fcf69e99144c4798a6da997bc1cba4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1365bc25b12a05351c4b027629a94cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#ac1365bc25b12a05351c4b027629a94cf">qb_ipcs_poll_handlers_set</a> (<a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *s, struct <a class="el" href="structqb__ipcs__poll__handlers.html">qb_ipcs_poll_handlers</a> *handlers)</td></tr>
<tr class="memdesc:ac1365bc25b12a05351c4b027629a94cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set your poll callbacks.  <a href="#ac1365bc25b12a05351c4b027629a94cf">More...</a><br/></td></tr>
<tr class="separator:ac1365bc25b12a05351c4b027629a94cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a482f915c0971b617379e5fc222203a53"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a482f915c0971b617379e5fc222203a53">qb_ipcs_service_context_set</a> (<a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *s, void *context)</td></tr>
<tr class="memdesc:a482f915c0971b617379e5fc222203a53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associate a "user" pointer with this service.  <a href="#a482f915c0971b617379e5fc222203a53">More...</a><br/></td></tr>
<tr class="separator:a482f915c0971b617379e5fc222203a53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9439b9ef3bae4fa32527f74d423c5c0"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#ae9439b9ef3bae4fa32527f74d423c5c0">qb_ipcs_service_context_get</a> (<a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *s)</td></tr>
<tr class="memdesc:ae9439b9ef3bae4fa32527f74d423c5c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the context (set previously)  <a href="#ae9439b9ef3bae4fa32527f74d423c5c0">More...</a><br/></td></tr>
<tr class="separator:ae9439b9ef3bae4fa32527f74d423c5c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c6d78461e464fbb6db6e549566b5077"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a8c6d78461e464fbb6db6e549566b5077">qb_ipcs_run</a> (<a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *s)</td></tr>
<tr class="memdesc:a8c6d78461e464fbb6db6e549566b5077"><td class="mdescLeft">&#160;</td><td class="mdescRight">run the new IPC server.  <a href="#a8c6d78461e464fbb6db6e549566b5077">More...</a><br/></td></tr>
<tr class="separator:a8c6d78461e464fbb6db6e549566b5077"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dea1432f7db7b222bde8c51ca8b620b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a8dea1432f7db7b222bde8c51ca8b620b">qb_ipcs_destroy</a> (<a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *s)</td></tr>
<tr class="memdesc:a8dea1432f7db7b222bde8c51ca8b620b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the IPC server.  <a href="#a8dea1432f7db7b222bde8c51ca8b620b">More...</a><br/></td></tr>
<tr class="separator:a8dea1432f7db7b222bde8c51ca8b620b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b7a103ed0cb8c4357a5de474d9dcaad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a0b7a103ed0cb8c4357a5de474d9dcaad">qb_ipcs_request_rate_limit</a> (<a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *s, enum <a class="el" href="qbipcs_8h.html#ac961fd31bca0eda50c87880c73cc5989">qb_ipcs_rate_limit</a> rl)</td></tr>
<tr class="memdesc:a0b7a103ed0cb8c4357a5de474d9dcaad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Limit the incoming request rate.  <a href="#a0b7a103ed0cb8c4357a5de474d9dcaad">More...</a><br/></td></tr>
<tr class="separator:a0b7a103ed0cb8c4357a5de474d9dcaad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac09f4fa06cfddf34531cf4cebff84e20"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#ac09f4fa06cfddf34531cf4cebff84e20">qb_ipcs_response_send</a> (<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c, const void *data, size_t size)</td></tr>
<tr class="memdesc:ac09f4fa06cfddf34531cf4cebff84e20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a response to a incoming request.  <a href="#ac09f4fa06cfddf34531cf4cebff84e20">More...</a><br/></td></tr>
<tr class="separator:ac09f4fa06cfddf34531cf4cebff84e20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c858fa42f9bf258394ecaa652996f1e"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a9c858fa42f9bf258394ecaa652996f1e">qb_ipcs_response_sendv</a> (<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c, const struct iovec *iov, size_t iov_len)</td></tr>
<tr class="memdesc:a9c858fa42f9bf258394ecaa652996f1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a response to a incoming request.  <a href="#a9c858fa42f9bf258394ecaa652996f1e">More...</a><br/></td></tr>
<tr class="separator:a9c858fa42f9bf258394ecaa652996f1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a077cde1ee4d678e7c7358d80cfa09807"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a077cde1ee4d678e7c7358d80cfa09807">qb_ipcs_event_send</a> (<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c, const void *data, size_t size)</td></tr>
<tr class="memdesc:a077cde1ee4d678e7c7358d80cfa09807"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an asynchronous event message to the client.  <a href="#a077cde1ee4d678e7c7358d80cfa09807">More...</a><br/></td></tr>
<tr class="separator:a077cde1ee4d678e7c7358d80cfa09807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a119c7aed4d8d2e14563cd2c8e704d530"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a119c7aed4d8d2e14563cd2c8e704d530">qb_ipcs_event_sendv</a> (<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c, const struct iovec *iov, size_t iov_len)</td></tr>
<tr class="memdesc:a119c7aed4d8d2e14563cd2c8e704d530"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an asynchronous event message to the client.  <a href="#a119c7aed4d8d2e14563cd2c8e704d530">More...</a><br/></td></tr>
<tr class="separator:a119c7aed4d8d2e14563cd2c8e704d530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fbe3d4641836645e0354cc48e011683"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a6fbe3d4641836645e0354cc48e011683">qb_ipcs_connection_ref</a> (<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c)</td></tr>
<tr class="memdesc:a6fbe3d4641836645e0354cc48e011683"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increment the connection's reference counter.  <a href="#a6fbe3d4641836645e0354cc48e011683">More...</a><br/></td></tr>
<tr class="separator:a6fbe3d4641836645e0354cc48e011683"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83e359ef8f00692a682b42505cb721a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a83e359ef8f00692a682b42505cb721a9">qb_ipcs_connection_unref</a> (<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c)</td></tr>
<tr class="memdesc:a83e359ef8f00692a682b42505cb721a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrement the connection's reference counter.  <a href="#a83e359ef8f00692a682b42505cb721a9">More...</a><br/></td></tr>
<tr class="separator:a83e359ef8f00692a682b42505cb721a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2a8954e0db41804c39a4b4ef181b4ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#aa2a8954e0db41804c39a4b4ef181b4ac">qb_ipcs_disconnect</a> (<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c)</td></tr>
<tr class="memdesc:aa2a8954e0db41804c39a4b4ef181b4ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnect from this client.  <a href="#aa2a8954e0db41804c39a4b4ef181b4ac">More...</a><br/></td></tr>
<tr class="separator:aa2a8954e0db41804c39a4b4ef181b4ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37dcc8f3d9cb8d06f4d6fe764647ce25"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a37dcc8f3d9cb8d06f4d6fe764647ce25">qb_ipcs_service_id_get</a> (<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c)</td></tr>
<tr class="memdesc:a37dcc8f3d9cb8d06f4d6fe764647ce25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the service id related to this connection's service.  <a href="#a37dcc8f3d9cb8d06f4d6fe764647ce25">More...</a><br/></td></tr>
<tr class="separator:a37dcc8f3d9cb8d06f4d6fe764647ce25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9063ee3f0d867fe3c0af6a71f0c94fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#ac9063ee3f0d867fe3c0af6a71f0c94fe">qb_ipcs_context_set</a> (<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c, void *context)</td></tr>
<tr class="memdesc:ac9063ee3f0d867fe3c0af6a71f0c94fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associate a "user" pointer with this connection.  <a href="#ac9063ee3f0d867fe3c0af6a71f0c94fe">More...</a><br/></td></tr>
<tr class="separator:ac9063ee3f0d867fe3c0af6a71f0c94fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a616a59121140760d0f0d33603a117b3f"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a616a59121140760d0f0d33603a117b3f">qb_ipcs_context_get</a> (<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c)</td></tr>
<tr class="memdesc:a616a59121140760d0f0d33603a117b3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the context (set previously)  <a href="#a616a59121140760d0f0d33603a117b3f">More...</a><br/></td></tr>
<tr class="separator:a616a59121140760d0f0d33603a117b3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaea4c3de2ecb33b1249981b3f7938cd1"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#aaea4c3de2ecb33b1249981b3f7938cd1">qb_ipcs_connection_service_context_get</a> (<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c)</td></tr>
<tr class="memdesc:aaea4c3de2ecb33b1249981b3f7938cd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the context previously set on the service backing this connection.  <a href="#aaea4c3de2ecb33b1249981b3f7938cd1">More...</a><br/></td></tr>
<tr class="separator:aaea4c3de2ecb33b1249981b3f7938cd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e41c5adc9a298a05ebb6a59b2f83a1f"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a6e41c5adc9a298a05ebb6a59b2f83a1f">qb_ipcs_connection_stats_get</a> (<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c, struct <a class="el" href="structqb__ipcs__connection__stats.html">qb_ipcs_connection_stats</a> *stats, int32_t clear_after_read)</td></tr>
<tr class="memdesc:a6e41c5adc9a298a05ebb6a59b2f83a1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the connection statistics.  <a href="#a6e41c5adc9a298a05ebb6a59b2f83a1f">More...</a><br/></td></tr>
<tr class="separator:a6e41c5adc9a298a05ebb6a59b2f83a1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b8d47f726cde80d3190e3f3f6054cf9"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structqb__ipcs__connection__stats__2.html">qb_ipcs_connection_stats_2</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a7b8d47f726cde80d3190e3f3f6054cf9">qb_ipcs_connection_stats_get_2</a> (<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c, int32_t clear_after_read)</td></tr>
<tr class="memdesc:a7b8d47f726cde80d3190e3f3f6054cf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get (and allocate) the connection statistics.  <a href="#a7b8d47f726cde80d3190e3f3f6054cf9">More...</a><br/></td></tr>
<tr class="separator:a7b8d47f726cde80d3190e3f3f6054cf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a805e7bae0645821506a99d6960cabf09"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a805e7bae0645821506a99d6960cabf09">qb_ipcs_stats_get</a> (<a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *pt, struct <a class="el" href="structqb__ipcs__stats.html">qb_ipcs_stats</a> *stats, int32_t clear_after_read)</td></tr>
<tr class="memdesc:a805e7bae0645821506a99d6960cabf09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the service statistics.  <a href="#a805e7bae0645821506a99d6960cabf09">More...</a><br/></td></tr>
<tr class="separator:a805e7bae0645821506a99d6960cabf09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb7e8f48ecc3f39031b294e637dc3bef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#acb7e8f48ecc3f39031b294e637dc3bef">qb_ipcs_connection_first_get</a> (<a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *pt)</td></tr>
<tr class="memdesc:acb7e8f48ecc3f39031b294e637dc3bef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the first connection.  <a href="#acb7e8f48ecc3f39031b294e637dc3bef">More...</a><br/></td></tr>
<tr class="separator:acb7e8f48ecc3f39031b294e637dc3bef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79c7dea4da1cce933138c23040a494b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a79c7dea4da1cce933138c23040a494b9">qb_ipcs_connection_next_get</a> (<a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *pt, <a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *current)</td></tr>
<tr class="memdesc:a79c7dea4da1cce933138c23040a494b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the next connection.  <a href="#a79c7dea4da1cce933138c23040a494b9">More...</a><br/></td></tr>
<tr class="separator:a79c7dea4da1cce933138c23040a494b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0676ec52c031402bb98c5b79a97b9e2b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a0676ec52c031402bb98c5b79a97b9e2b">qb_ipcs_connection_auth_set</a> (<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *conn, uid_t uid, gid_t gid, mode_t mode)</td></tr>
<tr class="memdesc:a0676ec52c031402bb98c5b79a97b9e2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the permissions on and shared memory files so that both processes can read and write to them.  <a href="#a0676ec52c031402bb98c5b79a97b9e2b">More...</a><br/></td></tr>
<tr class="separator:a0676ec52c031402bb98c5b79a97b9e2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadaa1dd87726d9a3dbc8caff12ed5810"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#aadaa1dd87726d9a3dbc8caff12ed5810">qb_ipcs_connection_get_buffer_size</a> (<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *conn)</td></tr>
<tr class="memdesc:aadaa1dd87726d9a3dbc8caff12ed5810"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the connection ipc buffer size.  <a href="#aadaa1dd87726d9a3dbc8caff12ed5810">More...</a><br/></td></tr>
<tr class="separator:aadaa1dd87726d9a3dbc8caff12ed5810"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5795622b5d60ad5d952059a0e14ec429"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbipcs_8h.html#a5795622b5d60ad5d952059a0e14ec429">qb_ipcs_enforce_buffer_size</a> (<a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *s, uint32_t max_buf_size)</td></tr>
<tr class="memdesc:a5795622b5d60ad5d952059a0e14ec429"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enforce the max buffer size clients must use from the server side.  <a href="#a5795622b5d60ad5d952059a0e14ec429">More...</a><br/></td></tr>
<tr class="separator:a5795622b5d60ad5d952059a0e14ec429"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Server IPC API. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a80564e14961186d8d1190f60ca4fce04"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int32_t(* qb_ipcs_connection_accept_fn)(<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c, uid_t uid, gid_t gid)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This callback is to check whether you want to accept a new connection. </p>
<p>The type of checks you should do are authentication, service availability or process resource constraints. </p>
<dl class="section return"><dt>Returns</dt><dd>0 to accept or -errno to indicate a failure (sent back to the client)</dd></dl>
<dl class="section note"><dt>Note</dt><dd>If connection state data is allocated as a result of this callback being invoked, that data must be freed in the destroy callback. Just because the accept callback returns 0, that does not guarantee the create and closed callback functions will follow. </dd>
<dd>
you can call <a class="el" href="qbipcs_8h.html#a0676ec52c031402bb98c5b79a97b9e2b" title="Set the permissions on and shared memory files so that both processes can read and write to them...">qb_ipcs_connection_auth_set()</a> within this function. </dd></dl>

</div>
</div>
<a class="anchor" id="af0f284652f8b9a7a319c0c402f21a6be"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int32_t(* qb_ipcs_connection_closed_fn)(<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is called after a connection has been disconnected. </p>
<dl class="section note"><dt>Note</dt><dd>This callback will only be invoked if the connection is successfully created. </dd>
<dd>
if you return anything but 0 this function will be repeatedly called (until 0 is returned). </dd></dl>

</div>
</div>
<a class="anchor" id="aec67497f3813dfc82793c0c16c6c9b76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* qb_ipcs_connection_created_fn)(<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is called after a new connection has been created. </p>
<dl class="section note"><dt>Note</dt><dd>A client connection is not considered connected until this callback is invoked. </dd></dl>

</div>
</div>
<a class="anchor" id="a39900be9ce9356aaf63e58608f9d16ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* qb_ipcs_connection_destroyed_fn)(<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is called just before a connection is freed. </p>

</div>
</div>
<a class="anchor" id="acc1fc937960ad337da002ef5564722b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct qb_ipcs_connection <a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa51bd9aad2e758253ec5bb8c3bc7ef2a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int32_t(* qb_ipcs_dispatch_add_fn)(enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a> p, int32_t fd, int32_t events, void *data, <a class="el" href="qbipcs_8h.html#a88f172c8df3409a07a5829719b26a4c9">qb_ipcs_dispatch_fn_t</a> fn)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aeef1a99bacd72c8ba3459343bd79b6fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int32_t(* qb_ipcs_dispatch_del_fn)(int32_t fd)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a88f172c8df3409a07a5829719b26a4c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int32_t(* qb_ipcs_dispatch_fn_t)(int32_t fd, int32_t revents, void *data)</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcserver_8c-example.html#a13">ipcserver.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a1cbfafeadb284664638c2f6f52b989ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int32_t(* qb_ipcs_dispatch_mod_fn)(enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a> p, int32_t fd, int32_t events, void *data, <a class="el" href="qbipcs_8h.html#a88f172c8df3409a07a5829719b26a4c9">qb_ipcs_dispatch_fn_t</a> fn)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a219a902ed4651c7106aee661c6cd334b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int32_t(* qb_ipcs_job_add_fn)(enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a> p, void *data, <a class="el" href="qbloop_8h.html#a16a3fefe47905f03180a87d40e8bc331">qb_loop_job_dispatch_fn</a> dispatch_fn)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab12a3f8cb86eea870ac8e382ccafb070"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int32_t(* qb_ipcs_msg_process_fn)(<a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *c, void *data, size_t size)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the message processing calback. </p>
<p>It is called with the message data. </p>

</div>
</div>
<a class="anchor" id="a098e863e2720e4611d49621487c9ca9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct qb_ipcs_service <a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ac961fd31bca0eda50c87880c73cc5989"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="qbipcs_8h.html#ac961fd31bca0eda50c87880c73cc5989">qb_ipcs_rate_limit</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="ac961fd31bca0eda50c87880c73cc5989a0b0b603de775dcdf996e53d15dde5541"></a>QB_IPCS_RATE_FAST</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ac961fd31bca0eda50c87880c73cc5989a840a10f4174748a340e774d9db8cc3de"></a>QB_IPCS_RATE_NORMAL</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ac961fd31bca0eda50c87880c73cc5989a89de3f5c2cabd1f83dedb1e89d8e3f17"></a>QB_IPCS_RATE_SLOW</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ac961fd31bca0eda50c87880c73cc5989acfd8268d58b87896daa74a39ffae82d4"></a>QB_IPCS_RATE_OFF</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ac961fd31bca0eda50c87880c73cc5989a02e6f359fa28ae101f7bfc274128a3e5"></a>QB_IPCS_RATE_OFF_2</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a0676ec52c031402bb98c5b79a97b9e2b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_ipcs_connection_auth_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uid_t&#160;</td>
          <td class="paramname"><em>uid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gid_t&#160;</td>
          <td class="paramname"><em>gid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mode_t&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the permissions on and shared memory files so that both processes can read and write to them. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>connection instance </td></tr>
    <tr><td class="paramname">uid</td><td>the user id to set. </td></tr>
    <tr><td class="paramname">gid</td><td>the group id to set. </td></tr>
    <tr><td class="paramname">mode</td><td>the mode to set.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd>chmod() chown() </dd></dl>
<dl class="section note"><dt>Note</dt><dd>this must be called within the <a class="el" href="qbipcs_8h.html#a80564e14961186d8d1190f60ca4fce04" title="This callback is to check whether you want to accept a new connection. ">qb_ipcs_connection_accept_fn()</a> callback. </dd></dl>

</div>
</div>
<a class="anchor" id="acb7e8f48ecc3f39031b294e637dc3bef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a>* qb_ipcs_connection_first_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *&#160;</td>
          <td class="paramname"><em>pt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the first connection. </p>
<dl class="section note"><dt>Note</dt><dd>call <a class="el" href="qbipcs_8h.html#a83e359ef8f00692a682b42505cb721a9" title="Decrement the connection&#39;s reference counter. ">qb_ipcs_connection_unref()</a> after using the connection.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pt</td><td>service instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>first connection </dd></dl>

</div>
</div>
<a class="anchor" id="aadaa1dd87726d9a3dbc8caff12ed5810"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_ipcs_connection_get_buffer_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the connection ipc buffer size. </p>
<p>This reflects the largest size msg that can be sent or received.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>connection instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>msg size in bytes, negative value on error. </dd></dl>

</div>
</div>
<a class="anchor" id="a79c7dea4da1cce933138c23040a494b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a>* qb_ipcs_connection_next_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *&#160;</td>
          <td class="paramname"><em>pt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *&#160;</td>
          <td class="paramname"><em>current</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the next connection. </p>
<dl class="section note"><dt>Note</dt><dd>call <a class="el" href="qbipcs_8h.html#a83e359ef8f00692a682b42505cb721a9" title="Decrement the connection&#39;s reference counter. ">qb_ipcs_connection_unref()</a> after using the connection.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pt</td><td>service instance </td></tr>
    <tr><td class="paramname">current</td><td>current connection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>next connection </dd></dl>

</div>
</div>
<a class="anchor" id="a6fbe3d4641836645e0354cc48e011683"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_ipcs_connection_ref </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increment the connection's reference counter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>connection instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aaea4c3de2ecb33b1249981b3f7938cd1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* qb_ipcs_connection_service_context_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the context previously set on the service backing this connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>connection instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the context </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="qbipcs_8h.html#a482f915c0971b617379e5fc222203a53" title="Associate a &quot;user&quot; pointer with this service. ">qb_ipcs_service_context_set</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a6e41c5adc9a298a05ebb6a59b2f83a1f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_ipcs_connection_stats_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structqb__ipcs__connection__stats.html">qb_ipcs_connection_stats</a> *&#160;</td>
          <td class="paramname"><em>stats</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>clear_after_read</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the connection statistics. </p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000001">Deprecated:</a></b></dt><dd>from v0.13.0 onwards, use qb_ipcs_connection_stats_get_2 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stats</td><td>(out) the statistics structure </td></tr>
    <tr><td class="paramname">clear_after_read</td><td>clear stats after copying them into stats </td></tr>
    <tr><td class="paramname">c</td><td>connection instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 == ok; -errno to indicate a failure </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcserver_8c-example.html#a5">ipcserver.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a7b8d47f726cde80d3190e3f3f6054cf9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structqb__ipcs__connection__stats__2.html">qb_ipcs_connection_stats_2</a>* qb_ipcs_connection_stats_get_2 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>clear_after_read</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get (and allocate) the connection statistics. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clear_after_read</td><td>clear stats after copying them into stats </td></tr>
    <tr><td class="paramname">c</td><td>connection instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>if no memory or invalid connection </td></tr>
    <tr><td class="paramname">allocated</td><td>statistics structure (user must free it). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a83e359ef8f00692a682b42505cb721a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_ipcs_connection_unref </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decrement the connection's reference counter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>connection instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a616a59121140760d0f0d33603a117b3f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* qb_ipcs_context_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the context (set previously) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>connection instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the context </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="qbipcs_8h.html#ac9063ee3f0d867fe3c0af6a71f0c94fe" title="Associate a &quot;user&quot; pointer with this connection. ">qb_ipcs_context_set()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ac9063ee3f0d867fe3c0af6a71f0c94fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_ipcs_context_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Associate a "user" pointer with this connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>the point to associate with this connection. </td></tr>
    <tr><td class="paramname">c</td><td>connection instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="qbipcs_8h.html#a616a59121140760d0f0d33603a117b3f" title="Get the context (set previously) ">qb_ipcs_context_get()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a0a5761733d99b71d8e2f24b10f3846de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a>* qb_ipcs_create </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>service_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="qbipc__common_8h.html#a8b0e590c38ee39628866bf02b505c334">qb_ipc_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structqb__ipcs__service__handlers.html">qb_ipcs_service_handlers</a> *&#160;</td>
          <td class="paramname"><em>handlers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new IPC server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>for clients to connect to. </td></tr>
    <tr><td class="paramname">service_id</td><td>an integer to associate with the service </td></tr>
    <tr><td class="paramname">type</td><td>transport type. </td></tr>
    <tr><td class="paramname">handlers</td><td>callbacks. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the new service instance. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcserver_8c-example.html#a37">ipcserver.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a8dea1432f7db7b222bde8c51ca8b620b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_ipcs_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy the IPC server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>service instance to destroy </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcserver_8c-example.html#a12">ipcserver.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="aa2a8954e0db41804c39a4b4ef181b4ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_ipcs_disconnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disconnect from this client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>connection instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5795622b5d60ad5d952059a0e14ec429"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_ipcs_enforce_buffer_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>max_buf_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enforce the max buffer size clients must use from the server side. </p>
<dl class="section note"><dt>Note</dt><dd>Setting this will force client connections to use at least max_buf_size bytes as their buffer size. If this value is not set on the server, the clients enforce their own buffer sizes.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>ipc server instance </td></tr>
    <tr><td class="paramname">max_buf_size</td><td>represented in bytes </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcserver_8c-example.html#a38">ipcserver.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a077cde1ee4d678e7c7358d80cfa09807"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t qb_ipcs_event_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send an asynchronous event message to the client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>connection instance </td></tr>
    <tr><td class="paramname">data</td><td>the message to send </td></tr>
    <tr><td class="paramname">size</td><td>the size of the message </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>size sent or -errno for errors</dd></dl>
<dl class="section note"><dt>Note</dt><dd>the data must include a <a class="el" href="structqb__ipc__response__header.html">qb_ipc_response_header</a> at the top of the message. The client will read the size field to determine how much to recv.</dd>
<dd>
When send returns -EMSGSIZE, this means the msg is too large and will never succeed. To determine the max msg size a client can be sent, use <a class="el" href="qbipcs_8h.html#aadaa1dd87726d9a3dbc8caff12ed5810" title="Retrieve the connection ipc buffer size. ">qb_ipcs_connection_get_buffer_size()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a119c7aed4d8d2e14563cd2c8e704d530"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t qb_ipcs_event_sendv </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct iovec *&#160;</td>
          <td class="paramname"><em>iov</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>iov_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send an asynchronous event message to the client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>connection instance </td></tr>
    <tr><td class="paramname">iov</td><td>the iovec struct that points to the message to send </td></tr>
    <tr><td class="paramname">iov_len</td><td>the number of iovecs. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>size sent or -errno for errors</dd></dl>
<dl class="section note"><dt>Note</dt><dd>the iov[0] must be a <a class="el" href="structqb__ipc__response__header.html">qb_ipc_response_header</a>. The client will read the size field to determine how much to recv.</dd>
<dd>
When send returns -EMSGSIZE, this means the msg is too large and will never succeed. To determine the max msg size a client can be sent, use <a class="el" href="qbipcs_8h.html#aadaa1dd87726d9a3dbc8caff12ed5810" title="Retrieve the connection ipc buffer size. ">qb_ipcs_connection_get_buffer_size()</a> </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcserver_8c-example.html#a9">ipcserver.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ac1365bc25b12a05351c4b027629a94cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_ipcs_poll_handlers_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structqb__ipcs__poll__handlers.html">qb_ipcs_poll_handlers</a> *&#160;</td>
          <td class="paramname"><em>handlers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set your poll callbacks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>service instance </td></tr>
    <tr><td class="paramname">handlers</td><td>the handlers that you want ipcs to use. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcserver_8c-example.html#a40">ipcserver.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ab717eb87bf57381919f8e8a67dcb0543"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_ipcs_ref </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increase the reference counter on the service object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>service instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0b7a103ed0cb8c4357a5de474d9dcaad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_ipcs_request_rate_limit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="qbipcs_8h.html#ac961fd31bca0eda50c87880c73cc5989">qb_ipcs_rate_limit</a>&#160;</td>
          <td class="paramname"><em>rl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Limit the incoming request rate. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>service instance </td></tr>
    <tr><td class="paramname">rl</td><td>the new rate </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac09f4fa06cfddf34531cf4cebff84e20"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t qb_ipcs_response_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a response to a incoming request. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>connection instance </td></tr>
    <tr><td class="paramname">data</td><td>the message to send </td></tr>
    <tr><td class="paramname">size</td><td>the size of the message </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>size sent or -errno for errors</dd></dl>
<dl class="section note"><dt>Note</dt><dd>the data must include a <a class="el" href="structqb__ipc__response__header.html">qb_ipc_response_header</a> at the top of the message. The client will read the size field to determine how much to recv. </dd></dl>

</div>
</div>
<a class="anchor" id="a9c858fa42f9bf258394ecaa652996f1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t qb_ipcs_response_sendv </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct iovec *&#160;</td>
          <td class="paramname"><em>iov</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>iov_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a response to a incoming request. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>connection instance </td></tr>
    <tr><td class="paramname">iov</td><td>the iovec struct that points to the message to send </td></tr>
    <tr><td class="paramname">iov_len</td><td>the number of iovecs. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>size sent or -errno for errors</dd></dl>
<dl class="section note"><dt>Note</dt><dd>the iov[0] must be a <a class="el" href="structqb__ipc__response__header.html">qb_ipc_response_header</a>. The client will read the size field to determine how much to recv.</dd>
<dd>
When send returns -EMSGSIZE, this means the msg is too large and will never succeed. To determine the max msg size a client can be sent, use <a class="el" href="qbipcs_8h.html#aadaa1dd87726d9a3dbc8caff12ed5810" title="Retrieve the connection ipc buffer size. ">qb_ipcs_connection_get_buffer_size()</a> </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcserver_8c-example.html#a10">ipcserver.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a8c6d78461e464fbb6db6e549566b5077"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_ipcs_run </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>run the new IPC server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>service instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 == ok; -errno to indicate a failure. Service is destroyed on failure. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcserver_8c-example.html#a41">ipcserver.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ae9439b9ef3bae4fa32527f74d423c5c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* qb_ipcs_service_context_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the context (set previously) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>service instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the context </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="qbipcs_8h.html#a482f915c0971b617379e5fc222203a53" title="Associate a &quot;user&quot; pointer with this service. ">qb_ipcs_service_context_set()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a482f915c0971b617379e5fc222203a53"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_ipcs_service_context_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Associate a "user" pointer with this service. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>service instance </td></tr>
    <tr><td class="paramname">context</td><td>the pointer to associate with this service. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="qbipcs_8h.html#ae9439b9ef3bae4fa32527f74d423c5c0" title="Get the context (set previously) ">qb_ipcs_service_context_get()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a37dcc8f3d9cb8d06f4d6fe764647ce25"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_ipcs_service_id_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#acc1fc937960ad337da002ef5564722b3">qb_ipcs_connection_t</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the service id related to this connection's service. </p>
<p>(as passed into <a class="el" href="qbipcs_8h.html#a0a5761733d99b71d8e2f24b10f3846de" title="Create a new IPC server. ">qb_ipcs_create()</a></p>
<dl class="section return"><dt>Returns</dt><dd>service id. </dd></dl>

</div>
</div>
<a class="anchor" id="a805e7bae0645821506a99d6960cabf09"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_ipcs_stats_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *&#160;</td>
          <td class="paramname"><em>pt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structqb__ipcs__stats.html">qb_ipcs_stats</a> *&#160;</td>
          <td class="paramname"><em>stats</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>clear_after_read</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the service statistics. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stats</td><td>(out) the statistics structure </td></tr>
    <tr><td class="paramname">clear_after_read</td><td>clear stats after copying them into stats </td></tr>
    <tr><td class="paramname">pt</td><td>service instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 == ok; -errno to indicate a failure </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcserver_8c-example.html#a3">ipcserver.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a58fcf69e99144c4798a6da997bc1cba4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_ipcs_unref </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbipcs_8h.html#a098e863e2720e4611d49621487c9ca9d">qb_ipcs_service_t</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decrease the reference counter on the service object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>service instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
