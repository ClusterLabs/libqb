<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libqb: IPC Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libqb
   &#160;<span id="projectnumber">1.9.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">index</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">IPC Overview </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Client IPC API.</p>
<dl class="section user"><dt>Overview</dt><dd>libqb provides a generically reusable very high performance shared memory IPC system for client and service applications. It supports many features including:<ul>
<li>Multiple transport implementations<ol type="1">
<li>Shared memory implementation for very high performance.</li>
<li>Unix sockets</li>
</ol>
</li>
<li>A synchronous request/response channel and asynchronous response channel per ipc connection.</li>
<li>User defined private data per IPC connection.</li>
<li>Ability to call a function per service on ipc connection and disconnection.</li>
<li>Authenticated IPC connection with ability for developer to define which UIDs and GIDs are valid at connection time.</li>
<li>Fully abstracted poll system so that any poll library may be used.</li>
<li>User defined selector for determining the proper function to call per service and id.</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Security</dt><dd>The ipc system uses default operating system security mechanics to ensure ipc connections are validated. A callback used with <a class="el" href="qbipcs_8h.html#a0a5761733d99b71d8e2f24b10f3846de" title="Create a new IPC server.">qb_ipcs_create()</a> is called for every new ipc connection with the parameters of UID and GID. The callback then determines if the UID and GID are authenticated for communication.</dd></dl>
<dl class="section user"><dt>Performance</dt><dd>For performance, QB_IPC_SHM (shared memory) is recommended. It is tuned for very high performance.</dd></dl>
<dl class="section user"><dt>Multithreading</dt><dd>There are not many guarantees about the ipc system being thread-safe. It is essential that all sends and all receives are in their own thread, though having separate threads for each is supported.</dd></dl>
<p>If you need to send on multiple threads then either use locking around the calls or create a separate connection for each thread.</p>
<dl class="section user"><dt>IPC sockets (Linux only)</dt><dd>On Linux IPC, abstract (non-filesystem) sockets are used by default. If you need to override this (say in a net=host container) and use sockets that reside in the filesystem, then you need to create a file called /etc/libqb/force-filesystem-sockets<ul>
<li>this is the default name and can be changed at ./configure time. The file does not need to contain any content, it's not a configuration file as such, just its presence will activate the feature.</li>
</ul>
</dd></dl>
<p>Note that this is a global option and read each time a new IPC connection (client or server) is created. So, to avoid having clients that cannot connect to running servers it is STRONGLY recommended to only create or remove this file prior to a system reboot or container restart.</p>
<dl class="section user"><dt>Client API</dt><dd></dd></dl>
<dl class="section user"><dt>Lifecycle of an IPC connection.</dt><dd>An IPC connection is made to the server with <a class="el" href="qbipcc_8h.html#a3a82d4c6b7a2ab201d992765d0de3a9a" title="Create a connection to an IPC service.">qb_ipcc_connect()</a>. This function connects to the server and requests channels be created for communication. To disconnect, the client either exits or executes the function <a class="el" href="qbipcc_8h.html#a067acfb7767d297df3ff5278ca59a807" title="Disconnect an IPC connection.">qb_ipcc_disconnect()</a>.</dd></dl>
<dl class="section user"><dt>Synchronous communication</dt><dd>The function <a class="el" href="qbipcc_8h.html#ad5f6553aa735a1d59f69a952bcdfff33" title="This is a convenience function that simply sends and then recvs.">qb_ipcc_sendv_recv()</a> sends an iovector request and receives a response.</dd></dl>
<dl class="section user"><dt>Asynchronous requests from the client</dt><dd>The function <a class="el" href="qbipcc_8h.html#ad24320112b230d637c007698610cddf4" title="Send a message (iovec).">qb_ipcc_sendv()</a> sends an iovector request. The function <a class="el" href="qbipcc_8h.html#a65e21d1c3d32a193942383df243970ec" title="Send a message.">qb_ipcc_send()</a> sends an message buffer request.</dd></dl>
<dl class="section user"><dt>Asynchronous events from the server</dt><dd>The <a class="el" href="qbipcc_8h.html#a6c5e4b3f7c1db49ad57dc24e04318822" title="Receive an event.">qb_ipcc_event_recv()</a> function receives an out-of-band asynchronous message. The asynchronous messages are queued and can provide very high out-of-band performance. To determine when to call <a class="el" href="qbipcc_8h.html#a6c5e4b3f7c1db49ad57dc24e04318822" title="Receive an event.">qb_ipcc_event_recv()</a> the <a class="el" href="qbipcc_8h.html#aa8bb1166a3262ec66a09baf8d2677e72" title="Get the file descriptor to poll.">qb_ipcc_fd_get()</a> call is used to obtain a file descriptor used in the poll() or select() system calls. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="qbipcc_8h.html" title="Client IPC API.">qbipcc.h</a></dd></dl>
<dl class="section user"><dt>Server API</dt><dd>Server IPC API.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="qbipcs_8h.html" title="Server IPC API.">qbipcs.h</a> </dd></dl>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
