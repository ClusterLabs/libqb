<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>libqb: qbatomic.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>qbatomic.h File Reference</h1>
<p>Basic atomic integer and pointer operations.  
<a href="#_details">More...</a></p>
<code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="qbdefs_8h.html">qb/qbdefs.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="qbconfig_8h.html">qb/qbconfig.h</a>&gt;</code><br/>
<div class="dynheader">
Include dependency graph for qbatomic.h:</div>
<div class="dynsection">
<div class="center"><img src="qbatomic_8h__incl.png" border="0" usemap="#qbatomic_8h_map" alt=""/></div>
<map name="qbatomic_8h_map" id="qbatomic_8h">
<area shape="rect" id="node5" href="qbdefs_8h.html" title="qb/qbdefs.h" alt="" coords="104,83,203,112"/><area shape="rect" id="node7" href="qbconfig_8h.html" title="qb/qbconfig.h" alt="" coords="227,83,336,112"/></map>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#a9035e2ff68d182ca66bb7c2e389a70e0">qb_atomic_int_get</a>(atomic)&nbsp;&nbsp;&nbsp;((int32_t)*(atomic))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#a4a38bad93979f740455739f5207ae36d">qb_atomic_int_set</a>(atomic, newval)&nbsp;&nbsp;&nbsp;((void) (*(atomic) = (newval)))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#adbe4f6d283dcb1ab027c751b6f4f4553">qb_atomic_pointer_get</a>(atomic)&nbsp;&nbsp;&nbsp;((void*)*(atomic))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#a2ab3c5a0da2fa411fa7062649edde2f7">qb_atomic_pointer_set</a>(atomic, newval)&nbsp;&nbsp;&nbsp;((void*) (*(atomic) = (newval)))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#aa6d16c0f72f2b24d06eff6f740c08e73">qb_atomic_int_inc</a>(atomic)&nbsp;&nbsp;&nbsp;(qb_atomic_int_add ((atomic), 1))</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Atomically increments the integer pointed to by atomic by 1.  <a href="#aa6d16c0f72f2b24d06eff6f740c08e73"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#ac2cf6faea05c0632d7bd7c0e06d5193c">qb_atomic_int_dec_and_test</a>(atomic)&nbsp;&nbsp;&nbsp;(qb_atomic_int_exchange_and_add ((atomic), -1) == 1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Atomically decrements the integer pointed to by atomic by 1.  <a href="#ac2cf6faea05c0632d7bd7c0e06d5193c"></a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#a822cfdb64a5e4f5f95348376a615788e">qb_atomic_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#a03090e78da12a7f935cc5e6425fb2a71">qb_atomic_int_exchange_and_add</a> (volatile int32_t QB_GNUC_MAY_ALIAS *atomic, int32_t val)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Atomically adds val to the integer pointed to by atomic.  <a href="#a03090e78da12a7f935cc5e6425fb2a71"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#a58235e23e83b038cd95b916fc807f2e3">qb_atomic_int_add</a> (volatile int32_t QB_GNUC_MAY_ALIAS *atomic, int32_t val)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Atomically adds val to the integer pointed to by atomic.  <a href="#a58235e23e83b038cd95b916fc807f2e3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#a91f1e74d0097ef45fd447bf7fd4ef3bc">qb_atomic_int_compare_and_exchange</a> (volatile int32_t QB_GNUC_MAY_ALIAS *atomic, int32_t oldval, int32_t newval)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compares oldval with the integer pointed to by atomic and if they are equal, atomically exchanges *atomic with newval.  <a href="#a91f1e74d0097ef45fd447bf7fd4ef3bc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#aa7fa4d5c2a48a9f998651bc639d8003a">qb_atomic_pointer_compare_and_exchange</a> (volatile void *QB_GNUC_MAY_ALIAS *atomic, void *oldval, void *newval)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compares oldval with the pointer pointed to by atomic and if they are equal, atomically exchanges *atomic with newval.  <a href="#aa7fa4d5c2a48a9f998651bc639d8003a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#a62cef55f1c7df3b74886151a93001110">qb_atomic_int_get</a> (volatile int32_t QB_GNUC_MAY_ALIAS *atomic)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads the value of the integer pointed to by atomic.  <a href="#a62cef55f1c7df3b74886151a93001110"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#a0fdc01d5c66fd5909402422d7a8b774f">qb_atomic_int_set</a> (volatile int32_t QB_GNUC_MAY_ALIAS *atomic, int32_t newval)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the value of the integer pointed to by atomic.  <a href="#a0fdc01d5c66fd5909402422d7a8b774f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#a2515ea617ef528076e3d476c59d47323">qb_atomic_pointer_get</a> (volatile void *QB_GNUC_MAY_ALIAS *atomic)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads the value of the pointer pointed to by atomic.  <a href="#a2515ea617ef528076e3d476c59d47323"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#ac502c1e52be3be78508a91c1c5bd666e">qb_atomic_pointer_set</a> (volatile void *QB_GNUC_MAY_ALIAS *atomic, void *newval)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the value of the pointer pointed to by atomic.  <a href="#ac502c1e52be3be78508a91c1c5bd666e"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Basic atomic integer and pointer operations. </p>
<p>The following functions can be used to atomically access integers and pointers. They are implemented as inline assembler function on most platforms and use slower fall-backs otherwise. Using them can sometimes save you from using a performance-expensive pthread_mutex to protect the integer or pointer.</p>
<p>The most important usage is reference counting. Using <a class="el" href="qbatomic_8h.html#aa6d16c0f72f2b24d06eff6f740c08e73" title="Atomically increments the integer pointed to by atomic by 1.">qb_atomic_int_inc()</a> and <a class="el" href="qbatomic_8h.html#ac2cf6faea05c0632d7bd7c0e06d5193c" title="Atomically decrements the integer pointed to by atomic by 1.">qb_atomic_int_dec_and_test()</a> makes reference counting a very fast operation.</p>
<p>You must not directly read integers or pointers concurrently accessed by multiple threads, but use the atomic accessor functions instead. That is, always use <a class="el" href="qbatomic_8h.html#a9035e2ff68d182ca66bb7c2e389a70e0">qb_atomic_int_get()</a> and <a class="el" href="qbatomic_8h.html#adbe4f6d283dcb1ab027c751b6f4f4553">qb_atomic_pointer_get()</a> for read outs. They provide the necessary synchonization mechanisms like memory barriers to access memory locations concurrently.</p>
<p>If you are using those functions for anything apart from simple reference counting, you should really be aware of the implications of doing that. There are literally thousands of ways to shoot yourself in the foot. So if in doubt, use a pthread_mutex. If you don't know, what memory barriers are, do not use anything but <a class="el" href="qbatomic_8h.html#aa6d16c0f72f2b24d06eff6f740c08e73" title="Atomically increments the integer pointed to by atomic by 1.">qb_atomic_int_inc()</a> and <a class="el" href="qbatomic_8h.html#ac2cf6faea05c0632d7bd7c0e06d5193c" title="Atomically decrements the integer pointed to by atomic by 1.">qb_atomic_int_dec_and_test()</a>.</p>
<p>It is not safe to set an integer or pointer just by assigning to it, when it is concurrently accessed by other threads with the following functions. Use <a class="el" href="qbatomic_8h.html#a91f1e74d0097ef45fd447bf7fd4ef3bc" title="Compares oldval with the integer pointed to by atomic and if they are equal, atomically...">qb_atomic_int_compare_and_exchange()</a> or <a class="el" href="qbatomic_8h.html#aa7fa4d5c2a48a9f998651bc639d8003a" title="Compares oldval with the pointer pointed to by atomic and if they are equal, atomically...">qb_atomic_pointer_compare_and_exchange()</a> respectively. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ac2cf6faea05c0632d7bd7c0e06d5193c"></a><!-- doxytag: member="qbatomic.h::qb_atomic_int_dec_and_test" ref="ac2cf6faea05c0632d7bd7c0e06d5193c" args="(atomic)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define qb_atomic_int_dec_and_test</td>
          <td>(</td>
          <td class="paramtype">atomic&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(qb_atomic_int_exchange_and_add ((atomic), -1) == 1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Atomically decrements the integer pointed to by atomic by 1. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>atomic</em>&nbsp;</td><td>a pointer to an integer</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>QB_TRUE if the integer pointed to by atomic is 0 after decrementing it </dd></dl>

</div>
</div>
<a class="anchor" id="a9035e2ff68d182ca66bb7c2e389a70e0"></a><!-- doxytag: member="qbatomic.h::qb_atomic_int_get" ref="a9035e2ff68d182ca66bb7c2e389a70e0" args="(atomic)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define qb_atomic_int_get</td>
          <td>(</td>
          <td class="paramtype">atomic&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((int32_t)*(atomic))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa6d16c0f72f2b24d06eff6f740c08e73"></a><!-- doxytag: member="qbatomic.h::qb_atomic_int_inc" ref="aa6d16c0f72f2b24d06eff6f740c08e73" args="(atomic)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define qb_atomic_int_inc</td>
          <td>(</td>
          <td class="paramtype">atomic&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(qb_atomic_int_add ((atomic), 1))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Atomically increments the integer pointed to by atomic by 1. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>atomic</em>&nbsp;</td><td>a pointer to an integer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4a38bad93979f740455739f5207ae36d"></a><!-- doxytag: member="qbatomic.h::qb_atomic_int_set" ref="a4a38bad93979f740455739f5207ae36d" args="(atomic, newval)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define qb_atomic_int_set</td>
          <td>(</td>
          <td class="paramtype">atomic, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">newval&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((void) (*(atomic) = (newval)))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="adbe4f6d283dcb1ab027c751b6f4f4553"></a><!-- doxytag: member="qbatomic.h::qb_atomic_pointer_get" ref="adbe4f6d283dcb1ab027c751b6f4f4553" args="(atomic)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define qb_atomic_pointer_get</td>
          <td>(</td>
          <td class="paramtype">atomic&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((void*)*(atomic))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2ab3c5a0da2fa411fa7062649edde2f7"></a><!-- doxytag: member="qbatomic.h::qb_atomic_pointer_set" ref="a2ab3c5a0da2fa411fa7062649edde2f7" args="(atomic, newval)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define qb_atomic_pointer_set</td>
          <td>(</td>
          <td class="paramtype">atomic, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">newval&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((void*) (*(atomic) = (newval)))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a822cfdb64a5e4f5f95348376a615788e"></a><!-- doxytag: member="qbatomic.h::qb_atomic_init" ref="a822cfdb64a5e4f5f95348376a615788e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_atomic_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a58235e23e83b038cd95b916fc807f2e3"></a><!-- doxytag: member="qbatomic.h::qb_atomic_int_add" ref="a58235e23e83b038cd95b916fc807f2e3" args="(volatile int32_t QB_GNUC_MAY_ALIAS *atomic, int32_t val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_atomic_int_add </td>
          <td>(</td>
          <td class="paramtype">volatile int32_t QB_GNUC_MAY_ALIAS *&nbsp;</td>
          <td class="paramname"> <em>atomic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>val</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Atomically adds val to the integer pointed to by atomic. </p>
<p>Also acts as a memory barrier.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>atomic</em>&nbsp;</td><td>a pointer to an integer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>val</em>&nbsp;</td><td>the value to add to *atomic </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a91f1e74d0097ef45fd447bf7fd4ef3bc"></a><!-- doxytag: member="qbatomic.h::qb_atomic_int_compare_and_exchange" ref="a91f1e74d0097ef45fd447bf7fd4ef3bc" args="(volatile int32_t QB_GNUC_MAY_ALIAS *atomic, int32_t oldval, int32_t newval)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_atomic_int_compare_and_exchange </td>
          <td>(</td>
          <td class="paramtype">volatile int32_t QB_GNUC_MAY_ALIAS *&nbsp;</td>
          <td class="paramname"> <em>atomic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>oldval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>newval</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compares oldval with the integer pointed to by atomic and if they are equal, atomically exchanges *atomic with newval. </p>
<p>Also acts as a memory barrier.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>atomic</em>&nbsp;</td><td>a pointer to an integer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>oldval</em>&nbsp;</td><td>the assumed old value of *atomic </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>newval</em>&nbsp;</td><td>the new value of *atomic</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>QB_TRUE, if *atomic was equal oldval. QB_FALSE otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a03090e78da12a7f935cc5e6425fb2a71"></a><!-- doxytag: member="qbatomic.h::qb_atomic_int_exchange_and_add" ref="a03090e78da12a7f935cc5e6425fb2a71" args="(volatile int32_t QB_GNUC_MAY_ALIAS *atomic, int32_t val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_atomic_int_exchange_and_add </td>
          <td>(</td>
          <td class="paramtype">volatile int32_t QB_GNUC_MAY_ALIAS *&nbsp;</td>
          <td class="paramname"> <em>atomic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>val</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Atomically adds val to the integer pointed to by atomic. </p>
<p>It returns the value of *atomic just before the addition took place. Also acts as a memory barrier.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>atomic</em>&nbsp;</td><td>a pointer to an integer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>val</em>&nbsp;</td><td>the value to add to *atomic </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the value of *atomic before the addition. </dd></dl>

</div>
</div>
<a class="anchor" id="a62cef55f1c7df3b74886151a93001110"></a><!-- doxytag: member="qbatomic.h::qb_atomic_int_get" ref="a62cef55f1c7df3b74886151a93001110" args="(volatile int32_t QB_GNUC_MAY_ALIAS *atomic)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_atomic_int_get </td>
          <td>(</td>
          <td class="paramtype">volatile int32_t QB_GNUC_MAY_ALIAS *&nbsp;</td>
          <td class="paramname"> <em>atomic</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads the value of the integer pointed to by atomic. </p>
<p>Also acts as a memory barrier.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>atomic</em>&nbsp;</td><td>a pointer to an integer</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the value of atomic </dd></dl>

</div>
</div>
<a class="anchor" id="a0fdc01d5c66fd5909402422d7a8b774f"></a><!-- doxytag: member="qbatomic.h::qb_atomic_int_set" ref="a0fdc01d5c66fd5909402422d7a8b774f" args="(volatile int32_t QB_GNUC_MAY_ALIAS *atomic, int32_t newval)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_atomic_int_set </td>
          <td>(</td>
          <td class="paramtype">volatile int32_t QB_GNUC_MAY_ALIAS *&nbsp;</td>
          <td class="paramname"> <em>atomic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>newval</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the value of the integer pointed to by atomic. </p>
<p>Also acts as a memory barrier.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>atomic</em>&nbsp;</td><td>a pointer to an integer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>newval</em>&nbsp;</td><td>the new value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa7fa4d5c2a48a9f998651bc639d8003a"></a><!-- doxytag: member="qbatomic.h::qb_atomic_pointer_compare_and_exchange" ref="aa7fa4d5c2a48a9f998651bc639d8003a" args="(volatile void *QB_GNUC_MAY_ALIAS *atomic, void *oldval, void *newval)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_atomic_pointer_compare_and_exchange </td>
          <td>(</td>
          <td class="paramtype">volatile void *QB_GNUC_MAY_ALIAS *&nbsp;</td>
          <td class="paramname"> <em>atomic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>oldval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>newval</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compares oldval with the pointer pointed to by atomic and if they are equal, atomically exchanges *atomic with newval. </p>
<p>Also acts as a memory barrier.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>atomic</em>&nbsp;</td><td>a pointer to a void* </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>oldval</em>&nbsp;</td><td>the assumed old value of *atomic </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>newval</em>&nbsp;</td><td>the new value of *atomic</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>QB_TRUE if atomic was equal oldval, else QB_FALSE. </dd></dl>

</div>
</div>
<a class="anchor" id="a2515ea617ef528076e3d476c59d47323"></a><!-- doxytag: member="qbatomic.h::qb_atomic_pointer_get" ref="a2515ea617ef528076e3d476c59d47323" args="(volatile void *QB_GNUC_MAY_ALIAS *atomic)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* qb_atomic_pointer_get </td>
          <td>(</td>
          <td class="paramtype">volatile void *QB_GNUC_MAY_ALIAS *&nbsp;</td>
          <td class="paramname"> <em>atomic</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads the value of the pointer pointed to by atomic. </p>
<p>Also acts as a memory barrier.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>atomic</em>&nbsp;</td><td>a pointer to a void*. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the value to add to atomic. </dd></dl>

</div>
</div>
<a class="anchor" id="ac502c1e52be3be78508a91c1c5bd666e"></a><!-- doxytag: member="qbatomic.h::qb_atomic_pointer_set" ref="ac502c1e52be3be78508a91c1c5bd666e" args="(volatile void *QB_GNUC_MAY_ALIAS *atomic, void *newval)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_atomic_pointer_set </td>
          <td>(</td>
          <td class="paramtype">volatile void *QB_GNUC_MAY_ALIAS *&nbsp;</td>
          <td class="paramname"> <em>atomic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>newval</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the value of the pointer pointed to by atomic. </p>
<p>Also acts as a memory barrier.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>atomic</em>&nbsp;</td><td>a pointer to a void* </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>newval</em>&nbsp;</td><td>the new value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 18 Mar 2016 for libqb by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
