<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3"/>
<title>libqb: qbatomic.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libqb
   &#160;<span id="projectnumber">0.17.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_99176029e6245da7be482686d42cbcde.html">qb</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">qbatomic.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Basic atomic integer and pointer operations.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="qbdefs_8h.html">qb/qbdefs.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="qbconfig_8h.html">qb/qbconfig.h</a>&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for qbatomic.h:</div>
<div class="dyncontent">
<div class="center"><img src="qbatomic_8h__incl.png" border="0" usemap="#qbatomic_8h" alt=""/></div>
<map name="qbatomic_8h" id="qbatomic_8h">
<area shape="rect" id="node5" href="qbdefs_8h.html" title="qb/qbdefs.h" alt="" coords="99,80,196,107"/><area shape="rect" id="node7" href="qbconfig_8h.html" title="qb/qbconfig.h" alt="" coords="221,80,328,107"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9035e2ff68d182ca66bb7c2e389a70e0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#a9035e2ff68d182ca66bb7c2e389a70e0">qb_atomic_int_get</a>(atomic)</td></tr>
<tr class="separator:a9035e2ff68d182ca66bb7c2e389a70e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a38bad93979f740455739f5207ae36d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#a4a38bad93979f740455739f5207ae36d">qb_atomic_int_set</a>(atomic, newval)</td></tr>
<tr class="separator:a4a38bad93979f740455739f5207ae36d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbe4f6d283dcb1ab027c751b6f4f4553"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#adbe4f6d283dcb1ab027c751b6f4f4553">qb_atomic_pointer_get</a>(atomic)</td></tr>
<tr class="separator:adbe4f6d283dcb1ab027c751b6f4f4553"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ab3c5a0da2fa411fa7062649edde2f7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#a2ab3c5a0da2fa411fa7062649edde2f7">qb_atomic_pointer_set</a>(atomic, newval)</td></tr>
<tr class="separator:a2ab3c5a0da2fa411fa7062649edde2f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6d16c0f72f2b24d06eff6f740c08e73"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#aa6d16c0f72f2b24d06eff6f740c08e73">qb_atomic_int_inc</a>(atomic)&#160;&#160;&#160;(<a class="el" href="qbatomic_8h.html#aea8fbf70703f8ee7819a0a2eb43ee7ce">qb_atomic_int_add</a> ((atomic), 1))</td></tr>
<tr class="memdesc:aa6d16c0f72f2b24d06eff6f740c08e73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomically increments the integer pointed to by atomic by 1.  <a href="#aa6d16c0f72f2b24d06eff6f740c08e73"></a><br/></td></tr>
<tr class="separator:aa6d16c0f72f2b24d06eff6f740c08e73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2cf6faea05c0632d7bd7c0e06d5193c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#ac2cf6faea05c0632d7bd7c0e06d5193c">qb_atomic_int_dec_and_test</a>(atomic)&#160;&#160;&#160;(<a class="el" href="qbatomic_8h.html#afe710743f962dd2248b243716870fe1b">qb_atomic_int_exchange_and_add</a> ((atomic), -1) == 1)</td></tr>
<tr class="memdesc:ac2cf6faea05c0632d7bd7c0e06d5193c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomically decrements the integer pointed to by atomic by 1.  <a href="#ac2cf6faea05c0632d7bd7c0e06d5193c"></a><br/></td></tr>
<tr class="separator:ac2cf6faea05c0632d7bd7c0e06d5193c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a822cfdb64a5e4f5f95348376a615788e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#a822cfdb64a5e4f5f95348376a615788e">qb_atomic_init</a> (void)</td></tr>
<tr class="separator:a822cfdb64a5e4f5f95348376a615788e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe710743f962dd2248b243716870fe1b"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#afe710743f962dd2248b243716870fe1b">qb_atomic_int_exchange_and_add</a> (volatile int32_t *atomic, int32_t val)</td></tr>
<tr class="memdesc:afe710743f962dd2248b243716870fe1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomically adds val to the integer pointed to by atomic.  <a href="#afe710743f962dd2248b243716870fe1b"></a><br/></td></tr>
<tr class="separator:afe710743f962dd2248b243716870fe1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea8fbf70703f8ee7819a0a2eb43ee7ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#aea8fbf70703f8ee7819a0a2eb43ee7ce">qb_atomic_int_add</a> (volatile int32_t *atomic, int32_t val)</td></tr>
<tr class="memdesc:aea8fbf70703f8ee7819a0a2eb43ee7ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomically adds val to the integer pointed to by atomic.  <a href="#aea8fbf70703f8ee7819a0a2eb43ee7ce"></a><br/></td></tr>
<tr class="separator:aea8fbf70703f8ee7819a0a2eb43ee7ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69bcf9259804c24de476a2df054f0828"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#a69bcf9259804c24de476a2df054f0828">qb_atomic_int_compare_and_exchange</a> (volatile int32_t *atomic, int32_t oldval, int32_t newval)</td></tr>
<tr class="memdesc:a69bcf9259804c24de476a2df054f0828"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compares oldval with the integer pointed to by atomic and if they are equal, atomically exchanges *atomic with newval.  <a href="#a69bcf9259804c24de476a2df054f0828"></a><br/></td></tr>
<tr class="separator:a69bcf9259804c24de476a2df054f0828"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafd56dc5d3dd9ec0ac66eaf5a50e3918"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#aafd56dc5d3dd9ec0ac66eaf5a50e3918">qb_atomic_pointer_compare_and_exchange</a> (volatile void **atomic, void *oldval, void *newval)</td></tr>
<tr class="memdesc:aafd56dc5d3dd9ec0ac66eaf5a50e3918"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compares oldval with the pointer pointed to by atomic and if they are equal, atomically exchanges *atomic with newval.  <a href="#aafd56dc5d3dd9ec0ac66eaf5a50e3918"></a><br/></td></tr>
<tr class="separator:aafd56dc5d3dd9ec0ac66eaf5a50e3918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a553b439f7a3e80c77238acad0873c7ae"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#a553b439f7a3e80c77238acad0873c7ae">qb_atomic_int_get</a> (volatile int32_t *atomic)</td></tr>
<tr class="memdesc:a553b439f7a3e80c77238acad0873c7ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the value of the integer pointed to by atomic.  <a href="#a553b439f7a3e80c77238acad0873c7ae"></a><br/></td></tr>
<tr class="separator:a553b439f7a3e80c77238acad0873c7ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61fa412129441dee2ebcd6ceff87146a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#a61fa412129441dee2ebcd6ceff87146a">qb_atomic_int_set</a> (volatile int32_t *atomic, int32_t newval)</td></tr>
<tr class="memdesc:a61fa412129441dee2ebcd6ceff87146a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the value of the integer pointed to by atomic.  <a href="#a61fa412129441dee2ebcd6ceff87146a"></a><br/></td></tr>
<tr class="separator:a61fa412129441dee2ebcd6ceff87146a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69338f81697a671dc5a3a8a988a6f9e1"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#a69338f81697a671dc5a3a8a988a6f9e1">qb_atomic_pointer_get</a> (volatile void **atomic)</td></tr>
<tr class="memdesc:a69338f81697a671dc5a3a8a988a6f9e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the value of the pointer pointed to by atomic.  <a href="#a69338f81697a671dc5a3a8a988a6f9e1"></a><br/></td></tr>
<tr class="separator:a69338f81697a671dc5a3a8a988a6f9e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff7933531fb804e6b0472bfadedd4353"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbatomic_8h.html#aff7933531fb804e6b0472bfadedd4353">qb_atomic_pointer_set</a> (volatile void **atomic, void *newval)</td></tr>
<tr class="memdesc:aff7933531fb804e6b0472bfadedd4353"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the value of the pointer pointed to by atomic.  <a href="#aff7933531fb804e6b0472bfadedd4353"></a><br/></td></tr>
<tr class="separator:aff7933531fb804e6b0472bfadedd4353"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Basic atomic integer and pointer operations. </p>
<p>The following functions can be used to atomically access integers and pointers. They are implemented as inline assembler function on most platforms and use slower fall-backs otherwise. Using them can sometimes save you from using a performance-expensive pthread_mutex to protect the integer or pointer.</p>
<p>The most important usage is reference counting. Using <a class="el" href="qbatomic_8h.html#aa6d16c0f72f2b24d06eff6f740c08e73" title="Atomically increments the integer pointed to by atomic by 1.">qb_atomic_int_inc()</a> and <a class="el" href="qbatomic_8h.html#ac2cf6faea05c0632d7bd7c0e06d5193c" title="Atomically decrements the integer pointed to by atomic by 1.">qb_atomic_int_dec_and_test()</a> makes reference counting a very fast operation.</p>
<p>You must not directly read integers or pointers concurrently accessed by multiple threads, but use the atomic accessor functions instead. That is, always use <a class="el" href="qbatomic_8h.html#a9035e2ff68d182ca66bb7c2e389a70e0">qb_atomic_int_get()</a> and <a class="el" href="qbatomic_8h.html#adbe4f6d283dcb1ab027c751b6f4f4553">qb_atomic_pointer_get()</a> for read outs. They provide the neccessary synchonization mechanisms like memory barriers to access memory locations concurrently.</p>
<p>If you are using those functions for anything apart from simple reference counting, you should really be aware of the implications of doing that. There are literally thousands of ways to shoot yourself in the foot. So if in doubt, use a pthread_mutex. If you don't know, what memory barriers are, do not use anything but <a class="el" href="qbatomic_8h.html#aa6d16c0f72f2b24d06eff6f740c08e73" title="Atomically increments the integer pointed to by atomic by 1.">qb_atomic_int_inc()</a> and <a class="el" href="qbatomic_8h.html#ac2cf6faea05c0632d7bd7c0e06d5193c" title="Atomically decrements the integer pointed to by atomic by 1.">qb_atomic_int_dec_and_test()</a>.</p>
<p>It is not safe to set an integer or pointer just by assigning to it, when it is concurrently accessed by other threads with the following functions. Use <a class="el" href="qbatomic_8h.html#a69bcf9259804c24de476a2df054f0828" title="Compares oldval with the integer pointed to by atomic and if they are equal, atomically exchanges *at...">qb_atomic_int_compare_and_exchange()</a> or <a class="el" href="qbatomic_8h.html#aafd56dc5d3dd9ec0ac66eaf5a50e3918" title="Compares oldval with the pointer pointed to by atomic and if they are equal, atomically exchanges *at...">qb_atomic_pointer_compare_and_exchange()</a> respectively. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ac2cf6faea05c0632d7bd7c0e06d5193c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define qb_atomic_int_dec_and_test</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">atomic</td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="qbatomic_8h.html#afe710743f962dd2248b243716870fe1b">qb_atomic_int_exchange_and_add</a> ((atomic), -1) == 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atomically decrements the integer pointed to by atomic by 1. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">atomic</td><td>a pointer to an integer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>QB_TRUE if the integer pointed to by atomic is 0 after decrementing it </dd></dl>

</div>
</div>
<a class="anchor" id="a9035e2ff68d182ca66bb7c2e389a70e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define qb_atomic_int_get</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">atomic</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">((void) <span class="keyword">sizeof</span> (<span class="keywordtype">char</span>* [<span class="keyword">sizeof</span> (*(atomic)) == <span class="keyword">sizeof</span> (int32_t) ? 1 : -1]), \</div>
<div class="line">  (<a class="code" href="qbatomic_8h.html#a9035e2ff68d182ca66bb7c2e389a70e0">qb_atomic_int_get</a>) ((<span class="keyword">volatile</span> int32_t <a class="code" href="qbdefs_8h.html#a9d020e63252589baace07a01d36d6c39">QB_GNUC_MAY_ALIAS</a> *) (<span class="keyword">volatile</span> <span class="keywordtype">void</span> *) (atomic)))</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa6d16c0f72f2b24d06eff6f740c08e73"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define qb_atomic_int_inc</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">atomic</td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="qbatomic_8h.html#aea8fbf70703f8ee7819a0a2eb43ee7ce">qb_atomic_int_add</a> ((atomic), 1))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atomically increments the integer pointed to by atomic by 1. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">atomic</td><td>a pointer to an integer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4a38bad93979f740455739f5207ae36d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define qb_atomic_int_set</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">atomic, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">newval&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">((void) <span class="keyword">sizeof</span> (<span class="keywordtype">char</span>* [<span class="keyword">sizeof</span> (*(atomic)) == <span class="keyword">sizeof</span> (int32_t) ? 1 : -1]), \</div>
<div class="line">  (<a class="code" href="qbatomic_8h.html#a4a38bad93979f740455739f5207ae36d">qb_atomic_int_set</a>) ((<span class="keyword">volatile</span> int32_t <a class="code" href="qbdefs_8h.html#a9d020e63252589baace07a01d36d6c39">QB_GNUC_MAY_ALIAS</a> *) (<span class="keyword">volatile</span> <span class="keywordtype">void</span> *) (atomic), (newval)))</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adbe4f6d283dcb1ab027c751b6f4f4553"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define qb_atomic_pointer_get</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">atomic</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">((void) <span class="keyword">sizeof</span> (<span class="keywordtype">char</span>* [<span class="keyword">sizeof</span> (*(atomic)) == <span class="keyword">sizeof</span> (<span class="keywordtype">void</span>*) ? 1 : -1]), \</div>
<div class="line">  (<a class="code" href="qbatomic_8h.html#adbe4f6d283dcb1ab027c751b6f4f4553">qb_atomic_pointer_get</a>) ((<span class="keyword">volatile</span> <span class="keywordtype">void</span>* <a class="code" href="qbdefs_8h.html#a9d020e63252589baace07a01d36d6c39">QB_GNUC_MAY_ALIAS</a> *) (<span class="keyword">volatile</span> <span class="keywordtype">void</span> *) (atomic)))</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2ab3c5a0da2fa411fa7062649edde2f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define qb_atomic_pointer_set</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">atomic, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">newval&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">((void) <span class="keyword">sizeof</span> (<span class="keywordtype">char</span>* [<span class="keyword">sizeof</span> (*(atomic)) == <span class="keyword">sizeof</span> (<span class="keywordtype">void</span>*) ? 1 : -1]), \</div>
<div class="line">  (<a class="code" href="qbatomic_8h.html#a2ab3c5a0da2fa411fa7062649edde2f7">qb_atomic_pointer_set</a>) ((<span class="keyword">volatile</span> <span class="keywordtype">void</span>* <a class="code" href="qbdefs_8h.html#a9d020e63252589baace07a01d36d6c39">QB_GNUC_MAY_ALIAS</a> *) (<span class="keyword">volatile</span> <span class="keywordtype">void</span> *) (atomic), (newval)))</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a822cfdb64a5e4f5f95348376a615788e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_atomic_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aea8fbf70703f8ee7819a0a2eb43ee7ce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_atomic_int_add </td>
          <td>(</td>
          <td class="paramtype">volatile int32_t *&#160;</td>
          <td class="paramname"><em>atomic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atomically adds val to the integer pointed to by atomic. </p>
<p>Also acts as a memory barrier.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">atomic</td><td>a pointer to an integer </td></tr>
    <tr><td class="paramname">val</td><td>the value to add to *atomic </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a69bcf9259804c24de476a2df054f0828"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_atomic_int_compare_and_exchange </td>
          <td>(</td>
          <td class="paramtype">volatile int32_t *&#160;</td>
          <td class="paramname"><em>atomic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>oldval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>newval</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compares oldval with the integer pointed to by atomic and if they are equal, atomically exchanges *atomic with newval. </p>
<p>Also acts as a memory barrier.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">atomic</td><td>a pointer to an integer </td></tr>
    <tr><td class="paramname">oldval</td><td>the assumed old value of *atomic </td></tr>
    <tr><td class="paramname">newval</td><td>the new value of *atomic</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>QB_TRUE, if *atomic was equal oldval. QB_FALSE otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="afe710743f962dd2248b243716870fe1b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_atomic_int_exchange_and_add </td>
          <td>(</td>
          <td class="paramtype">volatile int32_t *&#160;</td>
          <td class="paramname"><em>atomic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atomically adds val to the integer pointed to by atomic. </p>
<p>It returns the value of *atomic just before the addition took place. Also acts as a memory barrier.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">atomic</td><td>a pointer to an integer </td></tr>
    <tr><td class="paramname">val</td><td>the value to add to *atomic </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the value of *atomic before the addition. </dd></dl>

</div>
</div>
<a class="anchor" id="a553b439f7a3e80c77238acad0873c7ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_atomic_int_get </td>
          <td>(</td>
          <td class="paramtype">volatile int32_t *&#160;</td>
          <td class="paramname"><em>atomic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the value of the integer pointed to by atomic. </p>
<p>Also acts as a memory barrier.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">atomic</td><td>a pointer to an integer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the value of atomic </dd></dl>

</div>
</div>
<a class="anchor" id="a61fa412129441dee2ebcd6ceff87146a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_atomic_int_set </td>
          <td>(</td>
          <td class="paramtype">volatile int32_t *&#160;</td>
          <td class="paramname"><em>atomic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>newval</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the value of the integer pointed to by atomic. </p>
<p>Also acts as a memory barrier.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">atomic</td><td>a pointer to an integer </td></tr>
    <tr><td class="paramname">newval</td><td>the new value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aafd56dc5d3dd9ec0ac66eaf5a50e3918"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_atomic_pointer_compare_and_exchange </td>
          <td>(</td>
          <td class="paramtype">volatile void **&#160;</td>
          <td class="paramname"><em>atomic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>oldval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>newval</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compares oldval with the pointer pointed to by atomic and if they are equal, atomically exchanges *atomic with newval. </p>
<p>Also acts as a memory barrier.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">atomic</td><td>a pointer to a void* </td></tr>
    <tr><td class="paramname">oldval</td><td>the assumed old value of *atomic </td></tr>
    <tr><td class="paramname">newval</td><td>the new value of *atomic</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>QB_TRUE if atomic was equal oldval, else QB_FALSE. </dd></dl>

</div>
</div>
<a class="anchor" id="a69338f81697a671dc5a3a8a988a6f9e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* qb_atomic_pointer_get </td>
          <td>(</td>
          <td class="paramtype">volatile void **&#160;</td>
          <td class="paramname"><em>atomic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the value of the pointer pointed to by atomic. </p>
<p>Also acts as a memory barrier.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">atomic</td><td>a pointer to a void*. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the value to add to atomic. </dd></dl>

</div>
</div>
<a class="anchor" id="aff7933531fb804e6b0472bfadedd4353"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_atomic_pointer_set </td>
          <td>(</td>
          <td class="paramtype">volatile void **&#160;</td>
          <td class="paramname"><em>atomic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>newval</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the value of the pointer pointed to by atomic. </p>
<p>Also acts as a memory barrier.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">atomic</td><td>a pointer to a void* </td></tr>
    <tr><td class="paramname">newval</td><td>the new value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3
</small></address>
</body>
</html>
