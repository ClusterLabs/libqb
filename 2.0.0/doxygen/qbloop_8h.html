<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>libqb: qbloop.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libqb
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_99176029e6245da7be482686d42cbcde.html">qb</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">qbloop.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Main loop manages timers, jobs and polling sockets.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;signal.h&gt;</code><br/>
<code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &lt;poll.h&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for qbloop.h:</div>
<div class="dyncontent">
<div class="center"><img src="qbloop_8h__incl.png" border="0" usemap="#qbloop_8h" alt=""/></div>
<map name="qbloop_8h" id="qbloop_8h">
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="qbloop_8h__dep__incl.png" border="0" usemap="#qbloop_8hdep" alt=""/></div>
<map name="qbloop_8hdep" id="qbloop_8hdep">
<area shape="rect" id="node2" href="qbipcs_8h.html" title="Server IPC API. " alt="" coords="6,80,81,107"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aa6a331b04a08da926684e21c6fe25c9c"><td class="memItemLeft" align="right" valign="top">typedef struct qb_loop&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a></td></tr>
<tr class="memdesc:aa6a331b04a08da926684e21c6fe25c9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">An opaque data type representing the main loop.  <a href="#aa6a331b04a08da926684e21c6fe25c9c">More...</a><br/></td></tr>
<tr class="separator:aa6a331b04a08da926684e21c6fe25c9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c626e34d6dcc7abf7f8a07054111b64"><td class="memItemLeft" align="right" valign="top">typedef uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a5c626e34d6dcc7abf7f8a07054111b64">qb_loop_timer_handle</a></td></tr>
<tr class="separator:a5c626e34d6dcc7abf7f8a07054111b64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a793d7dd71e2af023f0c316fa0bca8777"><td class="memItemLeft" align="right" valign="top">typedef void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a793d7dd71e2af023f0c316fa0bca8777">qb_loop_signal_handle</a></td></tr>
<tr class="separator:a793d7dd71e2af023f0c316fa0bca8777"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70c2e4146b2dc2e64b325fecdff8b2d5"><td class="memItemLeft" align="right" valign="top">typedef int32_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a70c2e4146b2dc2e64b325fecdff8b2d5">qb_loop_poll_dispatch_fn</a> )(int32_t fd, int32_t revents, void *data)</td></tr>
<tr class="separator:a70c2e4146b2dc2e64b325fecdff8b2d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16a3fefe47905f03180a87d40e8bc331"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a16a3fefe47905f03180a87d40e8bc331">qb_loop_job_dispatch_fn</a> )(void *data)</td></tr>
<tr class="separator:a16a3fefe47905f03180a87d40e8bc331"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30a0f677d2eeb480f78570ff74a3e934"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a30a0f677d2eeb480f78570ff74a3e934">qb_loop_timer_dispatch_fn</a> )(void *data)</td></tr>
<tr class="separator:a30a0f677d2eeb480f78570ff74a3e934"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a862ab19e9d02f8bcfc16f031eabbad95"><td class="memItemLeft" align="right" valign="top">typedef int32_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a862ab19e9d02f8bcfc16f031eabbad95">qb_loop_signal_dispatch_fn</a> )(int32_t rsignal, void *data)</td></tr>
<tr class="separator:a862ab19e9d02f8bcfc16f031eabbad95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fbffb2926c6643a3b7b2112a92259f0"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a4fbffb2926c6643a3b7b2112a92259f0">qb_loop_poll_low_fds_event_fn</a> )(int32_t not_enough, int32_t fds_available)</td></tr>
<tr class="separator:a4fbffb2926c6643a3b7b2112a92259f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a89b8ba9120c5ed538b915c1213762ac8"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a> { <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8a10e3daf10dfb0c35d665060525574772">QB_LOOP_LOW</a> = 0, 
<a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8a6012cd302e8e1fbe20041269edb126ac">QB_LOOP_MED</a> = 1, 
<a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8a081d525f719c01b95481dbc68fe1a3df">QB_LOOP_HIGH</a> = 2
 }</td></tr>
<tr class="memdesc:a89b8ba9120c5ed538b915c1213762ac8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Priorites for jobs, timers &amp; poll.  <a href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">More...</a><br/></td></tr>
<tr class="separator:a89b8ba9120c5ed538b915c1213762ac8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3c8591d13b2666d9986cd2b0cbbbc8c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a3c8591d13b2666d9986cd2b0cbbbc8c6">qb_loop_create</a> (void)</td></tr>
<tr class="memdesc:a3c8591d13b2666d9986cd2b0cbbbc8c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new main loop.  <a href="#a3c8591d13b2666d9986cd2b0cbbbc8c6">More...</a><br/></td></tr>
<tr class="separator:a3c8591d13b2666d9986cd2b0cbbbc8c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f6bcee37e069c21bc9d5aa68a47fe88"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a9f6bcee37e069c21bc9d5aa68a47fe88">qb_loop_destroy</a> (struct qb_loop *l)</td></tr>
<tr class="separator:a9f6bcee37e069c21bc9d5aa68a47fe88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e2462d99ca201b083d8c8c7d761460d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a4e2462d99ca201b083d8c8c7d761460d">qb_loop_stop</a> (<a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *l)</td></tr>
<tr class="memdesc:a4e2462d99ca201b083d8c8c7d761460d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the main loop.  <a href="#a4e2462d99ca201b083d8c8c7d761460d">More...</a><br/></td></tr>
<tr class="separator:a4e2462d99ca201b083d8c8c7d761460d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdc517fe737f9e90bc768ff728d5f6a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#abdc517fe737f9e90bc768ff728d5f6a9">qb_loop_run</a> (<a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *l)</td></tr>
<tr class="memdesc:abdc517fe737f9e90bc768ff728d5f6a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the main loop.  <a href="#abdc517fe737f9e90bc768ff728d5f6a9">More...</a><br/></td></tr>
<tr class="separator:abdc517fe737f9e90bc768ff728d5f6a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0836c8f237d09797115983ecd5b07011"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a0836c8f237d09797115983ecd5b07011">qb_loop_job_add</a> (<a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *l, enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a> p, void *data, <a class="el" href="qbloop_8h.html#a16a3fefe47905f03180a87d40e8bc331">qb_loop_job_dispatch_fn</a> dispatch_fn)</td></tr>
<tr class="memdesc:a0836c8f237d09797115983ecd5b07011"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a job to the mainloop.  <a href="#a0836c8f237d09797115983ecd5b07011">More...</a><br/></td></tr>
<tr class="separator:a0836c8f237d09797115983ecd5b07011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90ee286732d04e111a2400b8c9777e20"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a90ee286732d04e111a2400b8c9777e20">qb_loop_job_del</a> (struct qb_loop *l, enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a> p, void *data, <a class="el" href="qbloop_8h.html#a16a3fefe47905f03180a87d40e8bc331">qb_loop_job_dispatch_fn</a> dispatch_fn)</td></tr>
<tr class="memdesc:a90ee286732d04e111a2400b8c9777e20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a job from the mainloop.  <a href="#a90ee286732d04e111a2400b8c9777e20">More...</a><br/></td></tr>
<tr class="separator:a90ee286732d04e111a2400b8c9777e20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fa36fa640b65a9dce5086ad9dccb46c"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a4fa36fa640b65a9dce5086ad9dccb46c">qb_loop_timer_add</a> (<a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *l, enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a> p, uint64_t nsec_duration, void *data, <a class="el" href="qbloop_8h.html#a30a0f677d2eeb480f78570ff74a3e934">qb_loop_timer_dispatch_fn</a> dispatch_fn, <a class="el" href="qbloop_8h.html#a5c626e34d6dcc7abf7f8a07054111b64">qb_loop_timer_handle</a> *timer_handle_out)</td></tr>
<tr class="memdesc:a4fa36fa640b65a9dce5086ad9dccb46c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a timer to the mainloop.  <a href="#a4fa36fa640b65a9dce5086ad9dccb46c">More...</a><br/></td></tr>
<tr class="separator:a4fa36fa640b65a9dce5086ad9dccb46c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75a57ea14fb224e4a5cbf1cab65061eb"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a75a57ea14fb224e4a5cbf1cab65061eb">qb_loop_timer_del</a> (<a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *l, <a class="el" href="qbloop_8h.html#a5c626e34d6dcc7abf7f8a07054111b64">qb_loop_timer_handle</a> th)</td></tr>
<tr class="memdesc:a75a57ea14fb224e4a5cbf1cab65061eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a timer that is still outstanding.  <a href="#a75a57ea14fb224e4a5cbf1cab65061eb">More...</a><br/></td></tr>
<tr class="separator:a75a57ea14fb224e4a5cbf1cab65061eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a684f13ffaca4750ca28c1a47e3562963"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a684f13ffaca4750ca28c1a47e3562963">qb_loop_timer_is_running</a> (<a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *l, <a class="el" href="qbloop_8h.html#a5c626e34d6dcc7abf7f8a07054111b64">qb_loop_timer_handle</a> th)</td></tr>
<tr class="memdesc:a684f13ffaca4750ca28c1a47e3562963"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check to see if a timer that is still outstanding.  <a href="#a684f13ffaca4750ca28c1a47e3562963">More...</a><br/></td></tr>
<tr class="separator:a684f13ffaca4750ca28c1a47e3562963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1923b74acffb15fc0f963d5ea9075baa"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a1923b74acffb15fc0f963d5ea9075baa">qb_loop_timer_expire_time_get</a> (struct qb_loop *l, <a class="el" href="qbloop_8h.html#a5c626e34d6dcc7abf7f8a07054111b64">qb_loop_timer_handle</a> th)</td></tr>
<tr class="memdesc:a1923b74acffb15fc0f963d5ea9075baa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the expiration time of the timer, as set when the timer was created.  <a href="#a1923b74acffb15fc0f963d5ea9075baa">More...</a><br/></td></tr>
<tr class="separator:a1923b74acffb15fc0f963d5ea9075baa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19f1e5aaf487a0ac78240886a6402bd1"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a19f1e5aaf487a0ac78240886a6402bd1">qb_loop_timer_expire_time_remaining</a> (struct qb_loop *l, <a class="el" href="qbloop_8h.html#a5c626e34d6dcc7abf7f8a07054111b64">qb_loop_timer_handle</a> th)</td></tr>
<tr class="memdesc:a19f1e5aaf487a0ac78240886a6402bd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the time remaining before the timer expires.  <a href="#a19f1e5aaf487a0ac78240886a6402bd1">More...</a><br/></td></tr>
<tr class="separator:a19f1e5aaf487a0ac78240886a6402bd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac17776b5f63f27164c21e9d647eb8966"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#ac17776b5f63f27164c21e9d647eb8966">qb_loop_poll_low_fds_event_set</a> (<a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *l, <a class="el" href="qbloop_8h.html#a4fbffb2926c6643a3b7b2112a92259f0">qb_loop_poll_low_fds_event_fn</a> fn)</td></tr>
<tr class="memdesc:ac17776b5f63f27164c21e9d647eb8966"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a callback to receive events on file descriptors getting low.  <a href="#ac17776b5f63f27164c21e9d647eb8966">More...</a><br/></td></tr>
<tr class="separator:ac17776b5f63f27164c21e9d647eb8966"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa94a27975c1097d8adf866060c8b30fe"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#aa94a27975c1097d8adf866060c8b30fe">qb_loop_poll_add</a> (<a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *l, enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a> p, int32_t fd, int32_t events, void *data, <a class="el" href="qbloop_8h.html#a70c2e4146b2dc2e64b325fecdff8b2d5">qb_loop_poll_dispatch_fn</a> dispatch_fn)</td></tr>
<tr class="memdesc:aa94a27975c1097d8adf866060c8b30fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a poll job to the mainloop.  <a href="#aa94a27975c1097d8adf866060c8b30fe">More...</a><br/></td></tr>
<tr class="separator:aa94a27975c1097d8adf866060c8b30fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cfc9da8d17afcee7035ada1c7162447"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a2cfc9da8d17afcee7035ada1c7162447">qb_loop_poll_mod</a> (<a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *l, enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a> p, int32_t fd, int32_t events, void *data, <a class="el" href="qbloop_8h.html#a70c2e4146b2dc2e64b325fecdff8b2d5">qb_loop_poll_dispatch_fn</a> dispatch_fn)</td></tr>
<tr class="memdesc:a2cfc9da8d17afcee7035ada1c7162447"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modify a poll job.  <a href="#a2cfc9da8d17afcee7035ada1c7162447">More...</a><br/></td></tr>
<tr class="separator:a2cfc9da8d17afcee7035ada1c7162447"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae762d45e064e65dc06e6741978f91a45"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#ae762d45e064e65dc06e6741978f91a45">qb_loop_poll_del</a> (<a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *l, int32_t fd)</td></tr>
<tr class="memdesc:ae762d45e064e65dc06e6741978f91a45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a poll job.  <a href="#ae762d45e064e65dc06e6741978f91a45">More...</a><br/></td></tr>
<tr class="separator:ae762d45e064e65dc06e6741978f91a45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e699e0d462fa4c70d3f827847c10f87"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#a3e699e0d462fa4c70d3f827847c10f87">qb_loop_signal_add</a> (<a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *l, enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a> p, int32_t sig, void *data, <a class="el" href="qbloop_8h.html#a862ab19e9d02f8bcfc16f031eabbad95">qb_loop_signal_dispatch_fn</a> dispatch_fn, <a class="el" href="qbloop_8h.html#a793d7dd71e2af023f0c316fa0bca8777">qb_loop_signal_handle</a> *handle)</td></tr>
<tr class="memdesc:a3e699e0d462fa4c70d3f827847c10f87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a signal job.  <a href="#a3e699e0d462fa4c70d3f827847c10f87">More...</a><br/></td></tr>
<tr class="separator:a3e699e0d462fa4c70d3f827847c10f87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4d0954168ca4e293ba4ddfed0783200"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#ae4d0954168ca4e293ba4ddfed0783200">qb_loop_signal_mod</a> (<a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *l, enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a> p, int32_t sig, void *data, <a class="el" href="qbloop_8h.html#a862ab19e9d02f8bcfc16f031eabbad95">qb_loop_signal_dispatch_fn</a> dispatch_fn, <a class="el" href="qbloop_8h.html#a793d7dd71e2af023f0c316fa0bca8777">qb_loop_signal_handle</a> handle)</td></tr>
<tr class="memdesc:ae4d0954168ca4e293ba4ddfed0783200"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modify the signal job.  <a href="#ae4d0954168ca4e293ba4ddfed0783200">More...</a><br/></td></tr>
<tr class="separator:ae4d0954168ca4e293ba4ddfed0783200"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbfc52042e6a5af5fd6e3a3cfb3480df"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbloop_8h.html#afbfc52042e6a5af5fd6e3a3cfb3480df">qb_loop_signal_del</a> (<a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *l, <a class="el" href="qbloop_8h.html#a793d7dd71e2af023f0c316fa0bca8777">qb_loop_signal_handle</a> handle)</td></tr>
<tr class="memdesc:afbfc52042e6a5af5fd6e3a3cfb3480df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete the signal job.  <a href="#afbfc52042e6a5af5fd6e3a3cfb3480df">More...</a><br/></td></tr>
<tr class="separator:afbfc52042e6a5af5fd6e3a3cfb3480df"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main loop manages timers, jobs and polling sockets. </p>
<p>Only a weaker sense of priorities is implemented, alluding to distinct set of pros and cons compared to the stronger, strict approach to them as widely applied in this problem space (since the latter gives the application more control as the effect of the former can still be achieved with some reductions, whereas it is not straightforward the other way around; cf. static priority task scheduling vs. relative fine-tuning within a single priority domain with nice(2)):</p>
<ul>
<li>implicit mitigation for deadlock-prone priority arrangements</li>
<li>less predictable (proportional probability based, we can talk about an advisory effect of the priorities) responses to the arrival of the high-ranked events (i.e. in the process of the picking the next event to handle from the priority queue when at least two different priorities are eligible at the moment)</li>
</ul>
<p>One practical application for this module of libqb is in combination with IPC servers based on <a class="el" href="qbipcs_8h.html" title="Server IPC API. ">qbipcs.h</a> published one (the <a class="el" href="structqb__ipcs__poll__handlers.html">qb_ipcs_poll_handlers</a> structure maps fittingly to the control functions published here). </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a16a3fefe47905f03180a87d40e8bc331"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* qb_loop_job_dispatch_fn)(void *data)</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcserver_8c-example.html#a15">ipcserver.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a70c2e4146b2dc2e64b325fecdff8b2d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int32_t(* qb_loop_poll_dispatch_fn)(int32_t fd, int32_t revents, void *data)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a4fbffb2926c6643a3b7b2112a92259f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* qb_loop_poll_low_fds_event_fn)(int32_t not_enough, int32_t fds_available)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a862ab19e9d02f8bcfc16f031eabbad95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int32_t(* qb_loop_signal_dispatch_fn)(int32_t rsignal, void *data)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a793d7dd71e2af023f0c316fa0bca8777"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void* <a class="el" href="qbloop_8h.html#a793d7dd71e2af023f0c316fa0bca8777">qb_loop_signal_handle</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa6a331b04a08da926684e21c6fe25c9c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct qb_loop <a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An opaque data type representing the main loop. </p>

</div>
</div>
<a class="anchor" id="a30a0f677d2eeb480f78570ff74a3e934"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* qb_loop_timer_dispatch_fn)(void *data)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a5c626e34d6dcc7abf7f8a07054111b64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint64_t <a class="el" href="qbloop_8h.html#a5c626e34d6dcc7abf7f8a07054111b64">qb_loop_timer_handle</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="a89b8ba9120c5ed538b915c1213762ac8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Priorites for jobs, timers &amp; poll. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a89b8ba9120c5ed538b915c1213762ac8a10e3daf10dfb0c35d665060525574772"></a>QB_LOOP_LOW</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a89b8ba9120c5ed538b915c1213762ac8a6012cd302e8e1fbe20041269edb126ac"></a>QB_LOOP_MED</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a89b8ba9120c5ed538b915c1213762ac8a081d525f719c01b95481dbc68fe1a3df"></a>QB_LOOP_HIGH</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a3c8591d13b2666d9986cd2b0cbbbc8c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a>* qb_loop_create </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new main loop. </p>
<dl class="section return"><dt>Returns</dt><dd>loop instance. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcserver_8c-example.html#a39">ipcserver.c</a>, and <a class="el" href="tcpserver_8c-example.html#a5">tcpserver.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a9f6bcee37e069c21bc9d5aa68a47fe88"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_loop_destroy </td>
          <td>(</td>
          <td class="paramtype">struct qb_loop *&#160;</td>
          <td class="paramname"><em>l</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0836c8f237d09797115983ecd5b07011"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_loop_job_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a>&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#a16a3fefe47905f03180a87d40e8bc331">qb_loop_job_dispatch_fn</a>&#160;</td>
          <td class="paramname"><em>dispatch_fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a job to the mainloop. </p>
<p>This is run in the next cycle of the loop. </p>
<dl class="section note"><dt>Note</dt><dd>it is a one-shot job.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>pointer to the loop instance </td></tr>
    <tr><td class="paramname">p</td><td>the priority </td></tr>
    <tr><td class="paramname">data</td><td>user data passed into the dispatch function </td></tr>
    <tr><td class="paramname">dispatch_fn</td><td>callback function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status (0 == ok, -errno == failure) </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcserver_8c-example.html#a16">ipcserver.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a90ee286732d04e111a2400b8c9777e20"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_loop_job_del </td>
          <td>(</td>
          <td class="paramtype">struct qb_loop *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a>&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#a16a3fefe47905f03180a87d40e8bc331">qb_loop_job_dispatch_fn</a>&#160;</td>
          <td class="paramname"><em>dispatch_fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a job from the mainloop. </p>
<p>This will try to delete the job if it hasn't run yet.</p>
<dl class="section note"><dt>Note</dt><dd>this will remove the first job that matches the parameters (priority, data, dispatch_fn).</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>pointer to the loop instance </td></tr>
    <tr><td class="paramname">p</td><td>the priority </td></tr>
    <tr><td class="paramname">data</td><td>user data passed into the dispatch function </td></tr>
    <tr><td class="paramname">dispatch_fn</td><td>callback function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status (0 == ok, -errno == failure) </dd></dl>

</div>
</div>
<a class="anchor" id="aa94a27975c1097d8adf866060c8b30fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_loop_poll_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a>&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#a70c2e4146b2dc2e64b325fecdff8b2d5">qb_loop_poll_dispatch_fn</a>&#160;</td>
          <td class="paramname"><em>dispatch_fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a poll job to the mainloop. </p>
<dl class="section note"><dt>Note</dt><dd>it is a re-occurring job.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>pointer to the loop instance </td></tr>
    <tr><td class="paramname">p</td><td>the priority </td></tr>
    <tr><td class="paramname">fd</td><td>file descriptor. </td></tr>
    <tr><td class="paramname">events</td><td>(POLLIN|POLLOUT) etc .... </td></tr>
    <tr><td class="paramname">data</td><td>user data passed into the dispatch function </td></tr>
    <tr><td class="paramname">dispatch_fn</td><td>callback function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status (0 == ok, -errno == failure) </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcserver_8c-example.html#a17">ipcserver.c</a>, and <a class="el" href="tcpserver_8c-example.html#a2">tcpserver.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ae762d45e064e65dc06e6741978f91a45"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_loop_poll_del </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a poll job. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>pointer to the loop instance </td></tr>
    <tr><td class="paramname">fd</td><td>file descriptor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status (0 == ok, -errno == failure) </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcserver_8c-example.html#a19">ipcserver.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ac17776b5f63f27164c21e9d647eb8966"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_loop_poll_low_fds_event_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#a4fbffb2926c6643a3b7b2112a92259f0">qb_loop_poll_low_fds_event_fn</a>&#160;</td>
          <td class="paramname"><em>fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a callback to receive events on file descriptors getting low. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>pointer to the loop instance </td></tr>
    <tr><td class="paramname">fn</td><td>callback function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status (0 == ok, -errno == failure) </dd></dl>

</div>
</div>
<a class="anchor" id="a2cfc9da8d17afcee7035ada1c7162447"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_loop_poll_mod </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a>&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#a70c2e4146b2dc2e64b325fecdff8b2d5">qb_loop_poll_dispatch_fn</a>&#160;</td>
          <td class="paramname"><em>dispatch_fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Modify a poll job. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>pointer to the loop instance </td></tr>
    <tr><td class="paramname">p</td><td>the priority </td></tr>
    <tr><td class="paramname">fd</td><td>file descriptor. </td></tr>
    <tr><td class="paramname">events</td><td>(POLLIN|POLLOUT) etc .... </td></tr>
    <tr><td class="paramname">data</td><td>user data passed into the dispatch function </td></tr>
    <tr><td class="paramname">dispatch_fn</td><td>callback function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status (0 == ok, -errno == failure) </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcserver_8c-example.html#a18">ipcserver.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="abdc517fe737f9e90bc768ff728d5f6a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_loop_run </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *&#160;</td>
          <td class="paramname"><em>l</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run the main loop. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>pointer to the loop instance </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcserver_8c-example.html#a42">ipcserver.c</a>, and <a class="el" href="tcpserver_8c-example.html#a8">tcpserver.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a3e699e0d462fa4c70d3f827847c10f87"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_loop_signal_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a>&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>sig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#a862ab19e9d02f8bcfc16f031eabbad95">qb_loop_signal_dispatch_fn</a>&#160;</td>
          <td class="paramname"><em>dispatch_fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#a793d7dd71e2af023f0c316fa0bca8777">qb_loop_signal_handle</a> *&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a signal job. </p>
<p>Get a callback on this signal (not in the context of the signal).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>pointer to the loop instance </td></tr>
    <tr><td class="paramname">p</td><td>the priority </td></tr>
    <tr><td class="paramname">sig</td><td>(SIGHUP or SIGINT) etc .... </td></tr>
    <tr><td class="paramname">data</td><td>user data passed into the dispatch function </td></tr>
    <tr><td class="paramname">dispatch_fn</td><td>callback function </td></tr>
    <tr><td class="paramname">handle</td><td>(out) a reference to the signal job </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status (0 == ok, -errno == failure) </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="tcpserver_8c-example.html#a6">tcpserver.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="afbfc52042e6a5af5fd6e3a3cfb3480df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_loop_signal_del </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#a793d7dd71e2af023f0c316fa0bca8777">qb_loop_signal_handle</a>&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete the signal job. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>pointer to the loop instance </td></tr>
    <tr><td class="paramname">handle</td><td>(in) a reference to the signal job </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status (0 == ok, -errno == failure) </dd></dl>

</div>
</div>
<a class="anchor" id="ae4d0954168ca4e293ba4ddfed0783200"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_loop_signal_mod </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a>&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>sig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#a862ab19e9d02f8bcfc16f031eabbad95">qb_loop_signal_dispatch_fn</a>&#160;</td>
          <td class="paramname"><em>dispatch_fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#a793d7dd71e2af023f0c316fa0bca8777">qb_loop_signal_handle</a>&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Modify the signal job. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>pointer to the loop instance </td></tr>
    <tr><td class="paramname">p</td><td>the priority </td></tr>
    <tr><td class="paramname">sig</td><td>(SIGHUP or SIGINT) etc .... </td></tr>
    <tr><td class="paramname">data</td><td>user data passed into the dispatch function </td></tr>
    <tr><td class="paramname">dispatch_fn</td><td>callback function </td></tr>
    <tr><td class="paramname">handle</td><td>(in) a reference to the signal job </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status (0 == ok, -errno == failure) </dd></dl>

</div>
</div>
<a class="anchor" id="a4e2462d99ca201b083d8c8c7d761460d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_loop_stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *&#160;</td>
          <td class="paramname"><em>l</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop the main loop. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>pointer to the loop instance </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="tcpserver_8c-example.html#a4">tcpserver.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a4fa36fa640b65a9dce5086ad9dccb46c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_loop_timer_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="qbloop_8h.html#a89b8ba9120c5ed538b915c1213762ac8">qb_loop_priority</a>&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>nsec_duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#a30a0f677d2eeb480f78570ff74a3e934">qb_loop_timer_dispatch_fn</a>&#160;</td>
          <td class="paramname"><em>dispatch_fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#a5c626e34d6dcc7abf7f8a07054111b64">qb_loop_timer_handle</a> *&#160;</td>
          <td class="paramname"><em>timer_handle_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a timer to the mainloop. </p>
<dl class="section note"><dt>Note</dt><dd>it is a one-shot job.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>pointer to the loop instance </td></tr>
    <tr><td class="paramname">p</td><td>the priority </td></tr>
    <tr><td class="paramname">nsec_duration</td><td>nano-secs in the future to run the dispatch. </td></tr>
    <tr><td class="paramname">data</td><td>user data passed into the dispatch function </td></tr>
    <tr><td class="paramname">dispatch_fn</td><td>callback function </td></tr>
    <tr><td class="paramname">timer_handle_out</td><td>handle to delete the timer if needed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status (0 == ok, -errno == failure) </dd></dl>

</div>
</div>
<a class="anchor" id="a75a57ea14fb224e4a5cbf1cab65061eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_loop_timer_del </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#a5c626e34d6dcc7abf7f8a07054111b64">qb_loop_timer_handle</a>&#160;</td>
          <td class="paramname"><em>th</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a timer that is still outstanding. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>pointer to the loop instance </td></tr>
    <tr><td class="paramname">th</td><td>handle to delete the timer if needed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status (0 == ok, -errno == failure) </dd></dl>

</div>
</div>
<a class="anchor" id="a1923b74acffb15fc0f963d5ea9075baa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t qb_loop_timer_expire_time_get </td>
          <td>(</td>
          <td class="paramtype">struct qb_loop *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#a5c626e34d6dcc7abf7f8a07054111b64">qb_loop_timer_handle</a>&#160;</td>
          <td class="paramname"><em>th</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the expiration time of the timer, as set when the timer was created. </p>
<dl class="section note"><dt>Note</dt><dd>if the timer has already expired it will return 0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>pointer to the loop instance </td></tr>
    <tr><td class="paramname">th</td><td>timer handle. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nano seconds at which the timer will expire </dd></dl>

</div>
</div>
<a class="anchor" id="a19f1e5aaf487a0ac78240886a6402bd1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t qb_loop_timer_expire_time_remaining </td>
          <td>(</td>
          <td class="paramtype">struct qb_loop *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#a5c626e34d6dcc7abf7f8a07054111b64">qb_loop_timer_handle</a>&#160;</td>
          <td class="paramname"><em>th</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the time remaining before the timer expires. </p>
<dl class="section note"><dt>Note</dt><dd>if the timer has already expired it will return 0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>pointer to the loop instance </td></tr>
    <tr><td class="paramname">th</td><td>timer handle. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nano seconds remaining until the timer expires </dd></dl>

</div>
</div>
<a class="anchor" id="a684f13ffaca4750ca28c1a47e3562963"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_loop_timer_is_running </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#aa6a331b04a08da926684e21c6fe25c9c">qb_loop_t</a> *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qbloop_8h.html#a5c626e34d6dcc7abf7f8a07054111b64">qb_loop_timer_handle</a>&#160;</td>
          <td class="paramname"><em>th</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check to see if a timer that is still outstanding. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>pointer to the loop instance </td></tr>
    <tr><td class="paramname">th</td><td>handle to delete the timer if needed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">QB_TRUE</td><td>yes this timer is outstanding </td></tr>
    <tr><td class="paramname">QB_FALSE</td><td>this timer does not exist or has expired </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
