<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>libqb: qblog.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libqb
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_99176029e6245da7be482686d42cbcde.html">qb</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">qblog.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The logging API provides four main parts (basics, filtering, threading &amp; blackbox).  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdarg.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;syslog.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="qbutil_8h.html">qb/qbutil.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="qbconfig_8h.html">qb/qbconfig.h</a>&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for qblog.h:</div>
<div class="dyncontent">
<div class="center"><img src="qblog_8h__incl.png" border="0" usemap="#qblog_8h" alt=""/></div>
<map name="qblog_8h" id="qblog_8h">
<area shape="rect" id="node9" href="qbutil_8h.html" title="These are some convience functions used throughout libqb. " alt="" coords="601,80,691,107"/><area shape="rect" id="node13" href="qbconfig_8h.html" title="qb/qbconfig.h" alt="" coords="715,80,825,107"/><area shape="rect" id="node12" href="qbdefs_8h.html" title="These are some convience macros and defines. " alt="" coords="717,155,815,181"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structqb__log__callsite.html">qb_log_callsite</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">An instance of this structure is created for each log message.  <a href="structqb__log__callsite.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionqb__log__ctl2__arg__t.html">qb_log_ctl2_arg_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af7abc145380f1916838e42f9272aa0f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#af7abc145380f1916838e42f9272aa0f6">LOG_TRACE</a>&#160;&#160;&#160;(LOG_DEBUG + 1)</td></tr>
<tr class="separator:af7abc145380f1916838e42f9272aa0f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47e2618c6393e677b6001f7836ad4055"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a47e2618c6393e677b6001f7836ad4055">QB_LOG_MAX_LEN</a>&#160;&#160;&#160;512</td></tr>
<tr class="separator:a47e2618c6393e677b6001f7836ad4055"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34b5e8e6b0a03570f6a3f9c16ac2d25d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a34b5e8e6b0a03570f6a3f9c16ac2d25d">QB_LOG_ABSOLUTE_MAX_LEN</a>&#160;&#160;&#160;4096</td></tr>
<tr class="separator:a34b5e8e6b0a03570f6a3f9c16ac2d25d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad410b068561e8f4216ef15a11bf618e1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#ad410b068561e8f4216ef15a11bf618e1">QB_LOG_STRERROR_MAX_LEN</a>&#160;&#160;&#160;128</td></tr>
<tr class="separator:ad410b068561e8f4216ef15a11bf618e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa45df798479eefe727127618de4c9201"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#aa45df798479eefe727127618de4c9201">QB_LOG_INIT_DATA</a>(name)</td></tr>
<tr class="separator:aa45df798479eefe727127618de4c9201"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac357216b86a3fb153c6422c2a44eb0ee"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#ac357216b86a3fb153c6422c2a44eb0ee">QB_LOG_TAG_LIBQB_MSG_BIT</a>&#160;&#160;&#160;31</td></tr>
<tr class="separator:ac357216b86a3fb153c6422c2a44eb0ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a525f6c4ab37daa6e7622916a22f524"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a5a525f6c4ab37daa6e7622916a22f524">QB_LOG_TAG_LIBQB_MSG</a>&#160;&#160;&#160;(1U &lt;&lt; QB_LOG_TAG_LIBQB_MSG_BIT)</td></tr>
<tr class="separator:a5a525f6c4ab37daa6e7622916a22f524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d29d79cd6bd07e06da9fb56251922f9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a4d29d79cd6bd07e06da9fb56251922f9">qb_logt</a>(<a class="el" href="qblog_8h.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a>, <a class="el" href="qblog_8h.html#ac3fc73ca2f0f032be6ea70f9e9cb8837">tags</a>, fmt, args...)</td></tr>
<tr class="memdesc:a4d29d79cd6bd07e06da9fb56251922f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the function to generate a log message if you want to manually add tags.  <a href="#a4d29d79cd6bd07e06da9fb56251922f9">More...</a><br/></td></tr>
<tr class="separator:a4d29d79cd6bd07e06da9fb56251922f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1dcd0ac044680eead32eae864928d71"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#ac1dcd0ac044680eead32eae864928d71">qb_log</a>(<a class="el" href="qblog_8h.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a>, fmt, args...)&#160;&#160;&#160;<a class="el" href="qblog_8h.html#a4d29d79cd6bd07e06da9fb56251922f9">qb_logt</a>(<a class="el" href="qblog_8h.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a>, 0, fmt, ##args)</td></tr>
<tr class="memdesc:ac1dcd0ac044680eead32eae864928d71"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the main function to generate a log message.  <a href="#ac1dcd0ac044680eead32eae864928d71">More...</a><br/></td></tr>
<tr class="separator:ac1dcd0ac044680eead32eae864928d71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a601c7f30780283d3ed37f7cb03254df7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a601c7f30780283d3ed37f7cb03254df7">QB_XC</a>&#160;&#160;&#160;'\a'</td></tr>
<tr class="separator:a601c7f30780283d3ed37f7cb03254df7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7df20856e4b89400662e1ccd1c0c50a1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a7df20856e4b89400662e1ccd1c0c50a1">QB_XS</a>&#160;&#160;&#160;&quot;\a&quot;</td></tr>
<tr class="separator:a7df20856e4b89400662e1ccd1c0c50a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61d34b7974bdac7471a3b94b232bbf48"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a61d34b7974bdac7471a3b94b232bbf48">qb_perror</a>(<a class="el" href="qblog_8h.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a>, fmt, args...)</td></tr>
<tr class="memdesc:a61d34b7974bdac7471a3b94b232bbf48"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is similar to perror except it goes into the logging system.  <a href="#a61d34b7974bdac7471a3b94b232bbf48">More...</a><br/></td></tr>
<tr class="separator:a61d34b7974bdac7471a3b94b232bbf48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a952560e8e2bc7e6221f46e5f06485ff7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a952560e8e2bc7e6221f46e5f06485ff7">qb_enter</a>()&#160;&#160;&#160;<a class="el" href="qblog_8h.html#ac1dcd0ac044680eead32eae864928d71">qb_log</a>(<a class="el" href="qblog_8h.html#af7abc145380f1916838e42f9272aa0f6">LOG_TRACE</a>, &quot;ENTERING %s()&quot;, __func__)</td></tr>
<tr class="separator:a952560e8e2bc7e6221f46e5f06485ff7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c561626e0f2f23f595c43468d6f674e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a5c561626e0f2f23f595c43468d6f674e">qb_leave</a>()&#160;&#160;&#160;<a class="el" href="qblog_8h.html#ac1dcd0ac044680eead32eae864928d71">qb_log</a>(<a class="el" href="qblog_8h.html#af7abc145380f1916838e42f9272aa0f6">LOG_TRACE</a>, &quot;LEAVING %s()&quot;, __func__)</td></tr>
<tr class="separator:a5c561626e0f2f23f595c43468d6f674e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0725a5e352bfc89fded7eeca34c632da"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a0725a5e352bfc89fded7eeca34c632da">QB_LOG_CTL2_I32</a>(a)&#160;&#160;&#160;((<a class="el" href="unionqb__log__ctl2__arg__t.html">qb_log_ctl2_arg_t</a>) { .i32 = (a) })</td></tr>
<tr class="separator:a0725a5e352bfc89fded7eeca34c632da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8f739f89165037702989ccbee21ebee"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#af8f739f89165037702989ccbee21ebee">QB_LOG_CTL2_S</a>(a)&#160;&#160;&#160;((<a class="el" href="unionqb__log__ctl2__arg__t.html">qb_log_ctl2_arg_t</a>) { .s = (a) })</td></tr>
<tr class="separator:af8f739f89165037702989ccbee21ebee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b0da0b1067b7541bff8a39123dfdc5e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a3b0da0b1067b7541bff8a39123dfdc5e">QB_FEATURE_LOG_HIRES_TIMESTAMPS</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a3b0da0b1067b7541bff8a39123dfdc5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a Feature Test macro so that calling applications know that millisecond timestamps are implemented.  <a href="#a3b0da0b1067b7541bff8a39123dfdc5e">More...</a><br/></td></tr>
<tr class="separator:a3b0da0b1067b7541bff8a39123dfdc5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ab19163fc57662a18df611df6e4939016"><td class="memItemLeft" align="right" valign="top">typedef const char *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#ab19163fc57662a18df611df6e4939016">qb_log_tags_stringify_fn</a> )(uint32_t <a class="el" href="qblog_8h.html#ac3fc73ca2f0f032be6ea70f9e9cb8837">tags</a>)</td></tr>
<tr class="separator:ab19163fc57662a18df611df6e4939016"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93201b3c845e5933316909caf17d0a16"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a93201b3c845e5933316909caf17d0a16">qb_log_filter_fn</a> )(struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a> *cs)</td></tr>
<tr class="separator:a93201b3c845e5933316909caf17d0a16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6506923a971787a5d41e7c0ef2a8ee69"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a6506923a971787a5d41e7c0ef2a8ee69">qb_log_logger_fn</a> )(int32_t t, struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a> *cs, struct timespec *timestamp, const char *msg)</td></tr>
<tr class="separator:a6506923a971787a5d41e7c0ef2a8ee69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe3c9333af437562f22c3186ae5f8bc8"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#afe3c9333af437562f22c3186ae5f8bc8">qb_log_vlogger_fn</a> )(int32_t t, struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a> *cs, struct timespec *timestamp, va_list ap)</td></tr>
<tr class="separator:afe3c9333af437562f22c3186ae5f8bc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7856553373280fb1635ec41d3ed54c0"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#ad7856553373280fb1635ec41d3ed54c0">qb_log_close_fn</a> )(int32_t t)</td></tr>
<tr class="separator:ad7856553373280fb1635ec41d3ed54c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71aa235e6172aae51be7c3e0e5da30f6"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a71aa235e6172aae51be7c3e0e5da30f6">qb_log_reload_fn</a> )(int32_t t)</td></tr>
<tr class="separator:a71aa235e6172aae51be7c3e0e5da30f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a461cac884ce0c9a80f069af15c6c046a"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046a">qb_log_target_slot</a> { <br/>
&#160;&#160;<a class="el" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aadf21792ef072eac735a8afa1e4f1abaa">QB_LOG_TARGET_START</a>, 
<a class="el" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa37d39a2b557e61d46749fafab5dd325b">QB_LOG_TARGET_STATIC_START</a> = QB_LOG_TARGET_START, 
<a class="el" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa3811428d4ed722d87211411146622ad4">QB_LOG_SYSLOG</a> = QB_LOG_TARGET_STATIC_START, 
<a class="el" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa7667606d44f7b11302762237dff2b8ad">QB_LOG_STDERR</a>, 
<br/>
&#160;&#160;<a class="el" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa178ee41f37914617d5d86caf651dab5e">QB_LOG_BLACKBOX</a>, 
<a class="el" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa4e83afef566371fa86bd3c4c87b336f9">QB_LOG_STDOUT</a>, 
<a class="el" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa424e52ac21db1e1a42635c280a0096af">QB_LOG_TARGET_STATIC_MAX</a>, 
<a class="el" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa0f48c96c5b26c5fd064b811103e67568">QB_LOG_TARGET_STATIC_END</a> = QB_LOG_TARGET_STATIC_MAX - 1, 
<br/>
&#160;&#160;<a class="el" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa64a37f37d97040049d5c42ac510bcf2e">QB_LOG_TARGET_DYNAMIC_START</a> = QB_LOG_TARGET_STATIC_MAX, 
<a class="el" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa3eb29c1dd2f6004cf1c115c35d6936e9">QB_LOG_TARGET_MAX</a> = 32, 
<a class="el" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa476692f3852d8586de7a8f231a2bcb0d">QB_LOG_TARGET_DYNAMIC_END</a> = QB_LOG_TARGET_MAX - 1, 
<a class="el" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa59767cd8657ff66a3945159ffa5bd624">QB_LOG_TARGET_END</a> = QB_LOG_TARGET_DYNAMIC_END
<br/>
 }</td></tr>
<tr class="separator:a461cac884ce0c9a80f069af15c6c046a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d11a68334e40bbb180ad8e237f92c4f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a5d11a68334e40bbb180ad8e237f92c4f">qb_log_target_state</a> { <a class="el" href="qblog_8h.html#a5d11a68334e40bbb180ad8e237f92c4faccec5c7247423cbc82bbb174689c44c1">QB_LOG_STATE_UNUSED</a> = 1, 
<a class="el" href="qblog_8h.html#a5d11a68334e40bbb180ad8e237f92c4fafd131bb03f5d0e4365c0350bc3da880c">QB_LOG_STATE_DISABLED</a> = 2, 
<a class="el" href="qblog_8h.html#a5d11a68334e40bbb180ad8e237f92c4faf6d4c10e2cdc9d11daf3aeb86f917540">QB_LOG_STATE_ENABLED</a> = 3
 }</td></tr>
<tr class="separator:a5d11a68334e40bbb180ad8e237f92c4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa6a5dea031c8dc88fbd6d38fd72dee5"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5">qb_log_conf</a> { <br/>
&#160;&#160;<a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5a05b84aca7698c88c32fed66d60821771">QB_LOG_CONF_ENABLED</a>, 
<a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5a898bc61034dc2331544899fd42057e3a">QB_LOG_CONF_FACILITY</a>, 
<a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5a4a4c656414f452630627342f3680e6d6">QB_LOG_CONF_DEBUG</a>, 
<a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5a89f358b4a83f94b1efd0e6942506f24d">QB_LOG_CONF_SIZE</a>, 
<br/>
&#160;&#160;<a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5a190db017221bea9bc7c3683ca0dcd023">QB_LOG_CONF_THREADED</a>, 
<a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5a9b7cdd1040ac89368d7d10c3caa65c2d">QB_LOG_CONF_PRIORITY_BUMP</a>, 
<a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5ae722558db8b80fcc52eafff69277d578">QB_LOG_CONF_STATE_GET</a>, 
<a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5abdebc9d9e19cfa3fa4afd5f744260301">QB_LOG_CONF_FILE_SYNC</a>, 
<br/>
&#160;&#160;<a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5ae5ec90515c983b1000e99378a81977c5">QB_LOG_CONF_EXTENDED</a>, 
<a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5a43093841b0cc7ba22c5c5c1b59aa5aad">QB_LOG_CONF_IDENT</a>, 
<a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5a22bb93c2df93527925029d8632a49e72">QB_LOG_CONF_MAX_LINE_LEN</a>, 
<a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5ab51171e9560e53e7481ece3334fa2687">QB_LOG_CONF_ELLIPSIS</a>, 
<br/>
&#160;&#160;<a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5afd570cf662115801ec4d5a412362e55e">QB_LOG_CONF_USE_JOURNAL</a>
<br/>
 }</td></tr>
<tr class="separator:aaa6a5dea031c8dc88fbd6d38fd72dee5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa23b899fd898c0c999357532f187fc0f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#aa23b899fd898c0c999357532f187fc0f">qb_log_filter_type</a> { <br/>
&#160;&#160;<a class="el" href="qblog_8h.html#aa23b899fd898c0c999357532f187fc0fa868c37c795816ee3d64143c4090afbb6">QB_LOG_FILTER_FILE</a>, 
<a class="el" href="qblog_8h.html#aa23b899fd898c0c999357532f187fc0fa8991c590b0aa0c3179a8512fbdae9509">QB_LOG_FILTER_FUNCTION</a>, 
<a class="el" href="qblog_8h.html#aa23b899fd898c0c999357532f187fc0faa12df6f8f73d22379661a8f94d69850f">QB_LOG_FILTER_FORMAT</a>, 
<a class="el" href="qblog_8h.html#aa23b899fd898c0c999357532f187fc0fa38a1ba99c0323daf834880dbb466b1b6">QB_LOG_FILTER_FILE_REGEX</a>, 
<br/>
&#160;&#160;<a class="el" href="qblog_8h.html#aa23b899fd898c0c999357532f187fc0fa162f8bfb4c5c5191ab400756fb6a9752">QB_LOG_FILTER_FUNCTION_REGEX</a>, 
<a class="el" href="qblog_8h.html#aa23b899fd898c0c999357532f187fc0fa1c18d1742b1886e10fa203890dc72e17">QB_LOG_FILTER_FORMAT_REGEX</a>
<br/>
 }</td></tr>
<tr class="separator:aa23b899fd898c0c999357532f187fc0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bcfbbefc6d73b62e72b135ff29fe03f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a0bcfbbefc6d73b62e72b135ff29fe03f">qb_log_filter_conf</a> { <br/>
&#160;&#160;<a class="el" href="qblog_8h.html#a0bcfbbefc6d73b62e72b135ff29fe03faaae48ba27a8dafc2163aaf9637d5ce2f">QB_LOG_FILTER_ADD</a>, 
<a class="el" href="qblog_8h.html#a0bcfbbefc6d73b62e72b135ff29fe03fa80750aff80ec3c6a9bc8d9fb111ecf8c">QB_LOG_FILTER_REMOVE</a>, 
<a class="el" href="qblog_8h.html#a0bcfbbefc6d73b62e72b135ff29fe03fa42ee1aa5bd4edf7702888e88bba0447e">QB_LOG_FILTER_CLEAR_ALL</a>, 
<a class="el" href="qblog_8h.html#a0bcfbbefc6d73b62e72b135ff29fe03faa704eb536e18533392f81508ca95912b">QB_LOG_TAG_SET</a>, 
<br/>
&#160;&#160;<a class="el" href="qblog_8h.html#a0bcfbbefc6d73b62e72b135ff29fe03fabe9d7d79fd1a239767127ee3eb7c2c93">QB_LOG_TAG_CLEAR</a>, 
<a class="el" href="qblog_8h.html#a0bcfbbefc6d73b62e72b135ff29fe03fa1aabf35c9bfdbcef19b0df7e4c5cc6db">QB_LOG_TAG_CLEAR_ALL</a>
<br/>
 }</td></tr>
<tr class="separator:a0bcfbbefc6d73b62e72b135ff29fe03f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae2de5621cd0f2e33c27279f62c5d2f1f"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#ae2de5621cd0f2e33c27279f62c5d2f1f">__attribute__</a> ((aligned(8)))</td></tr>
<tr class="separator:ae2de5621cd0f2e33c27279f62c5d2f1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f8d3c208586320bc01c76fad242ae2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a0f8d3c208586320bc01c76fad242ae2f">qb_log_real_</a> (struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a> *cs,...)</td></tr>
<tr class="memdesc:a0f8d3c208586320bc01c76fad242ae2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal function: use <a class="el" href="qblog_8h.html#ac1dcd0ac044680eead32eae864928d71" title="This is the main function to generate a log message. ">qb_log()</a> or <a class="el" href="qblog_8h.html#a4d29d79cd6bd07e06da9fb56251922f9" title="This is the function to generate a log message if you want to manually add tags. ">qb_logt()</a>  <a href="#a0f8d3c208586320bc01c76fad242ae2f">More...</a><br/></td></tr>
<tr class="separator:a0f8d3c208586320bc01c76fad242ae2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a617e4b5e7ea7eef40eb1c7208a9332c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a617e4b5e7ea7eef40eb1c7208a9332c0">qb_log_real_va_</a> (struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a> *cs, va_list ap)</td></tr>
<tr class="separator:a617e4b5e7ea7eef40eb1c7208a9332c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee0d199e8a04108d54896f76be4d7271"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#aee0d199e8a04108d54896f76be4d7271">qb_log_from_external_source</a> (const char *<a class="el" href="qblog_8h.html#afa24a6ca95b4977cec3238001927aa22">function</a>, const char *<a class="el" href="qblog_8h.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>, const char *<a class="el" href="qblog_8h.html#a6bd2bb5fcc7628a640958994a22f997c">format</a>, uint8_t <a class="el" href="qblog_8h.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a>, uint32_t <a class="el" href="qblog_8h.html#abf2f4915fcc5d70ac361c73b683fc6ac">lineno</a>, uint32_t <a class="el" href="qblog_8h.html#ac3fc73ca2f0f032be6ea70f9e9cb8837">tags</a>,...) <a class="el" href="qblog_8h.html#ae2de5621cd0f2e33c27279f62c5d2f1f">__attribute__</a>((<a class="el" href="qblog_8h.html#a6bd2bb5fcc7628a640958994a22f997c">format</a>(printf</td></tr>
<tr class="memdesc:aee0d199e8a04108d54896f76be4d7271"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is to import logs from other code (like libraries) that provide a callback with their logs.  <a href="#aee0d199e8a04108d54896f76be4d7271">More...</a><br/></td></tr>
<tr class="separator:aee0d199e8a04108d54896f76be4d7271"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a052e886bfd25c6e776ae10b1801c411b"><td class="memItemLeft" align="right" valign="top">void struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a052e886bfd25c6e776ae10b1801c411b">qb_log_callsite_get</a> (const char *<a class="el" href="qblog_8h.html#afa24a6ca95b4977cec3238001927aa22">function</a>, const char *<a class="el" href="qblog_8h.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>, const char *<a class="el" href="qblog_8h.html#a6bd2bb5fcc7628a640958994a22f997c">format</a>, uint8_t <a class="el" href="qblog_8h.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a>, uint32_t <a class="el" href="qblog_8h.html#abf2f4915fcc5d70ac361c73b683fc6ac">lineno</a>, uint32_t <a class="el" href="qblog_8h.html#ac3fc73ca2f0f032be6ea70f9e9cb8837">tags</a>)</td></tr>
<tr class="memdesc:a052e886bfd25c6e776ae10b1801c411b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get or create a callsite at the given position.  <a href="#a052e886bfd25c6e776ae10b1801c411b">More...</a><br/></td></tr>
<tr class="separator:a052e886bfd25c6e776ae10b1801c411b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a269b9a2d809b60b9997b4bdf42ab3500"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a269b9a2d809b60b9997b4bdf42ab3500">qb_log_from_external_source_va</a> (const char *<a class="el" href="qblog_8h.html#afa24a6ca95b4977cec3238001927aa22">function</a>, const char *<a class="el" href="qblog_8h.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>, const char *<a class="el" href="qblog_8h.html#a6bd2bb5fcc7628a640958994a22f997c">format</a>, uint8_t <a class="el" href="qblog_8h.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a>, uint32_t <a class="el" href="qblog_8h.html#abf2f4915fcc5d70ac361c73b683fc6ac">lineno</a>, uint32_t <a class="el" href="qblog_8h.html#ac3fc73ca2f0f032be6ea70f9e9cb8837">tags</a>, va_list ap) <a class="el" href="qblog_8h.html#ae2de5621cd0f2e33c27279f62c5d2f1f">__attribute__</a>((<a class="el" href="qblog_8h.html#a6bd2bb5fcc7628a640958994a22f997c">format</a>(printf</td></tr>
<tr class="separator:a269b9a2d809b60b9997b4bdf42ab3500"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4261a1e62a9195139290b15793b8c4bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a4261a1e62a9195139290b15793b8c4bc">qb_log_init</a> (const char *name, int32_t facility, uint8_t <a class="el" href="qblog_8h.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a>)</td></tr>
<tr class="memdesc:a4261a1e62a9195139290b15793b8c4bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Init the logging system.  <a href="#a4261a1e62a9195139290b15793b8c4bc">More...</a><br/></td></tr>
<tr class="separator:a4261a1e62a9195139290b15793b8c4bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6b19c2d1c4de938418820a81d5d622c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#ad6b19c2d1c4de938418820a81d5d622c">qb_log_fini</a> (void)</td></tr>
<tr class="memdesc:ad6b19c2d1c4de938418820a81d5d622c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logging system finalization function.  <a href="#ad6b19c2d1c4de938418820a81d5d622c">More...</a><br/></td></tr>
<tr class="separator:ad6b19c2d1c4de938418820a81d5d622c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9afece5ccc75cb3772da16e684653e9"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#af9afece5ccc75cb3772da16e684653e9">qb_log_callsites_register</a> (struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a> *_start, struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a> *_stop)</td></tr>
<tr class="memdesc:af9afece5ccc75cb3772da16e684653e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">If you are using dynamically loadable modules via dlopen() and you load them after <a class="el" href="qblog_8h.html#a4261a1e62a9195139290b15793b8c4bc" title="Init the logging system. ">qb_log_init()</a> then after you load the module you will need to do the following to get the filters to work in that module:  <a href="#af9afece5ccc75cb3772da16e684653e9">More...</a><br/></td></tr>
<tr class="separator:af9afece5ccc75cb3772da16e684653e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe8ec15ce16e90d65e9c6e452c113858"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#abe8ec15ce16e90d65e9c6e452c113858">qb_log_callsites_dump</a> (void)</td></tr>
<tr class="memdesc:abe8ec15ce16e90d65e9c6e452c113858"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump the callsite info to stdout.  <a href="#abe8ec15ce16e90d65e9c6e452c113858">More...</a><br/></td></tr>
<tr class="separator:abe8ec15ce16e90d65e9c6e452c113858"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab19da4babdb23834a25e5865016fb02d"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#ab19da4babdb23834a25e5865016fb02d">qb_log_ctl</a> (int32_t target, enum <a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5">qb_log_conf</a> conf_type, int32_t arg)</td></tr>
<tr class="memdesc:ab19da4babdb23834a25e5865016fb02d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main logging control function.  <a href="#ab19da4babdb23834a25e5865016fb02d">More...</a><br/></td></tr>
<tr class="separator:ab19da4babdb23834a25e5865016fb02d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2ce9d637e7f86e7f229e4956d1e0779"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#ac2ce9d637e7f86e7f229e4956d1e0779">qb_log_ctl2</a> (int32_t target, enum <a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5">qb_log_conf</a> conf_type, <a class="el" href="unionqb__log__ctl2__arg__t.html">qb_log_ctl2_arg_t</a> arg)</td></tr>
<tr class="memdesc:ac2ce9d637e7f86e7f229e4956d1e0779"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extension of main logging control function accepting also strings.  <a href="#ac2ce9d637e7f86e7f229e4956d1e0779">More...</a><br/></td></tr>
<tr class="separator:ac2ce9d637e7f86e7f229e4956d1e0779"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a687531ff2f457ea5fe63dc91f74be783"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a687531ff2f457ea5fe63dc91f74be783">qb_log_filter_ctl</a> (int32_t value, enum <a class="el" href="qblog_8h.html#a0bcfbbefc6d73b62e72b135ff29fe03f">qb_log_filter_conf</a> c, enum <a class="el" href="qblog_8h.html#aa23b899fd898c0c999357532f187fc0f">qb_log_filter_type</a> type, const char *text, uint8_t low_priority)</td></tr>
<tr class="memdesc:a687531ff2f457ea5fe63dc91f74be783"><td class="mdescLeft">&#160;</td><td class="mdescRight">This allows you modify the 'tags' and 'targets' callsite fields at runtime.  <a href="#a687531ff2f457ea5fe63dc91f74be783">More...</a><br/></td></tr>
<tr class="separator:a687531ff2f457ea5fe63dc91f74be783"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13405551d5b2504b5bdc216da6c48c9c"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a13405551d5b2504b5bdc216da6c48c9c">qb_log_filter_ctl2</a> (int32_t value, enum <a class="el" href="qblog_8h.html#a0bcfbbefc6d73b62e72b135ff29fe03f">qb_log_filter_conf</a> c, enum <a class="el" href="qblog_8h.html#aa23b899fd898c0c999357532f187fc0f">qb_log_filter_type</a> type, const char *text, uint8_t high_priority, uint8_t low_priority)</td></tr>
<tr class="memdesc:a13405551d5b2504b5bdc216da6c48c9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This extends <a class="el" href="qblog_8h.html#a687531ff2f457ea5fe63dc91f74be783" title="This allows you modify the &#39;tags&#39; and &#39;targets&#39; callsite fields at runtime. ">qb_log_filter_ctl()</a> by been able to provide a high_priority.  <a href="#a13405551d5b2504b5bdc216da6c48c9c">More...</a><br/></td></tr>
<tr class="separator:a13405551d5b2504b5bdc216da6c48c9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8767a0f8c8af738dfdcd7931c73c535f"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a8767a0f8c8af738dfdcd7931c73c535f">qb_log_filter_fn_set</a> (<a class="el" href="qblog_8h.html#a93201b3c845e5933316909caf17d0a16">qb_log_filter_fn</a> fn)</td></tr>
<tr class="memdesc:a8767a0f8c8af738dfdcd7931c73c535f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instead of using the <a class="el" href="qblog_8h.html#a687531ff2f457ea5fe63dc91f74be783" title="This allows you modify the &#39;tags&#39; and &#39;targets&#39; callsite fields at runtime. ">qb_log_filter_ctl()</a> functions you can apply the filters manually by defining a callback and setting the targets field using <a class="el" href="qbdefs_8h.html#a9bd8ef742f690e1e7461e48869fcf2b3">qb_bit_set()</a> and <a class="el" href="qbdefs_8h.html#a4608568d54c624c02441b1e47ba80063">qb_bit_clear()</a> like the following below:  <a href="#a8767a0f8c8af738dfdcd7931c73c535f">More...</a><br/></td></tr>
<tr class="separator:a8767a0f8c8af738dfdcd7931c73c535f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84d94e1a167006c7f69407a56db18291"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a84d94e1a167006c7f69407a56db18291">qb_log_tags_stringify_fn_set</a> (<a class="el" href="qblog_8h.html#ab19163fc57662a18df611df6e4939016">qb_log_tags_stringify_fn</a> fn)</td></tr>
<tr class="memdesc:a84d94e1a167006c7f69407a56db18291"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the callback to map the 'tags' bit map to a string.  <a href="#a84d94e1a167006c7f69407a56db18291">More...</a><br/></td></tr>
<tr class="separator:a84d94e1a167006c7f69407a56db18291"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e8cf298ff5fd224a16537b30a899df9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a0e8cf298ff5fd224a16537b30a899df9">qb_log_format_set</a> (int32_t t, const char *<a class="el" href="qblog_8h.html#a6bd2bb5fcc7628a640958994a22f997c">format</a>)</td></tr>
<tr class="memdesc:a0e8cf298ff5fd224a16537b30a899df9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the format specifiers.  <a href="#a0e8cf298ff5fd224a16537b30a899df9">More...</a><br/></td></tr>
<tr class="separator:a0e8cf298ff5fd224a16537b30a899df9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46abb926947f450d5d66255ffd13ef4f"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a46abb926947f450d5d66255ffd13ef4f">qb_log_file_open</a> (const char *<a class="el" href="qblog_8h.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>)</td></tr>
<tr class="memdesc:a46abb926947f450d5d66255ffd13ef4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a log file.  <a href="#a46abb926947f450d5d66255ffd13ef4f">More...</a><br/></td></tr>
<tr class="separator:a46abb926947f450d5d66255ffd13ef4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe1f4fc7c94f0ead2a08228721fae5e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#afe1f4fc7c94f0ead2a08228721fae5e3">qb_log_file_close</a> (int32_t t)</td></tr>
<tr class="memdesc:afe1f4fc7c94f0ead2a08228721fae5e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a log file and release its resources.  <a href="#afe1f4fc7c94f0ead2a08228721fae5e3">More...</a><br/></td></tr>
<tr class="separator:afe1f4fc7c94f0ead2a08228721fae5e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93ce2e803162d16695a9e7264cf11393"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a93ce2e803162d16695a9e7264cf11393">qb_log_file_reopen</a> (int32_t t, const char *<a class="el" href="qblog_8h.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>)</td></tr>
<tr class="memdesc:a93ce2e803162d16695a9e7264cf11393"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a new log file for an existing target.  <a href="#a93ce2e803162d16695a9e7264cf11393">More...</a><br/></td></tr>
<tr class="separator:a93ce2e803162d16695a9e7264cf11393"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66a17b0ca1a97b04dd83d9bb21c56248"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a66a17b0ca1a97b04dd83d9bb21c56248">qb_log_thread_priority_set</a> (int32_t policy, int32_t <a class="el" href="qblog_8h.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a>)</td></tr>
<tr class="memdesc:a66a17b0ca1a97b04dd83d9bb21c56248"><td class="mdescLeft">&#160;</td><td class="mdescRight">When using threaded logging set the pthread policy and priority.  <a href="#a66a17b0ca1a97b04dd83d9bb21c56248">More...</a><br/></td></tr>
<tr class="separator:a66a17b0ca1a97b04dd83d9bb21c56248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa93049df374b16e48e352327d02be156"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#aa93049df374b16e48e352327d02be156">qb_log_thread_start</a> (void)</td></tr>
<tr class="memdesc:aa93049df374b16e48e352327d02be156"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the logging pthread.  <a href="#aa93049df374b16e48e352327d02be156">More...</a><br/></td></tr>
<tr class="separator:aa93049df374b16e48e352327d02be156"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb2f3aaaa5c32b994e0dc9069bb50ce6"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#aeb2f3aaaa5c32b994e0dc9069bb50ce6">qb_log_blackbox_write_to_file</a> (const char *<a class="el" href="qblog_8h.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>)</td></tr>
<tr class="memdesc:aeb2f3aaaa5c32b994e0dc9069bb50ce6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the blackbox to file.  <a href="#aeb2f3aaaa5c32b994e0dc9069bb50ce6">More...</a><br/></td></tr>
<tr class="separator:aeb2f3aaaa5c32b994e0dc9069bb50ce6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a309c0939d95cb279fbf2fea4e5148515"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a309c0939d95cb279fbf2fea4e5148515">qb_log_blackbox_print_from_file</a> (const char *<a class="el" href="qblog_8h.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>)</td></tr>
<tr class="memdesc:a309c0939d95cb279fbf2fea4e5148515"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the blackbox for file and print it out.  <a href="#a309c0939d95cb279fbf2fea4e5148515">More...</a><br/></td></tr>
<tr class="separator:a309c0939d95cb279fbf2fea4e5148515"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59cc8c69b2dafaf854e0f35a1c87e563"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a59cc8c69b2dafaf854e0f35a1c87e563">qb_log_custom_open</a> (<a class="el" href="qblog_8h.html#a6506923a971787a5d41e7c0ef2a8ee69">qb_log_logger_fn</a> log_fn, <a class="el" href="qblog_8h.html#ad7856553373280fb1635ec41d3ed54c0">qb_log_close_fn</a> close_fn, <a class="el" href="qblog_8h.html#a71aa235e6172aae51be7c3e0e5da30f6">qb_log_reload_fn</a> reload_fn, void *user_data)</td></tr>
<tr class="memdesc:a59cc8c69b2dafaf854e0f35a1c87e563"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a custom log target.  <a href="#a59cc8c69b2dafaf854e0f35a1c87e563">More...</a><br/></td></tr>
<tr class="separator:a59cc8c69b2dafaf854e0f35a1c87e563"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9536c00784aaccaf3364d8c1f43be9a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#af9536c00784aaccaf3364d8c1f43be9a">qb_log_custom_close</a> (int32_t t)</td></tr>
<tr class="memdesc:af9536c00784aaccaf3364d8c1f43be9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a custom log target and release its resources.  <a href="#af9536c00784aaccaf3364d8c1f43be9a">More...</a><br/></td></tr>
<tr class="separator:af9536c00784aaccaf3364d8c1f43be9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad83c4063ce34df10ade55a8eb95e3488"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#ad83c4063ce34df10ade55a8eb95e3488">qb_log_target_user_data_get</a> (int32_t t)</td></tr>
<tr class="memdesc:ad83c4063ce34df10ade55a8eb95e3488"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the user data set by either qb_log_custom_open or qb_log_target_user_data_set.  <a href="#ad83c4063ce34df10ade55a8eb95e3488">More...</a><br/></td></tr>
<tr class="separator:ad83c4063ce34df10ade55a8eb95e3488"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaafead940bad08c4132e1fc1d712297a"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#aaafead940bad08c4132e1fc1d712297a">qb_log_target_user_data_set</a> (int32_t t, void *user_data)</td></tr>
<tr class="memdesc:aaafead940bad08c4132e1fc1d712297a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associate user data with this log target.  <a href="#aaafead940bad08c4132e1fc1d712297a">More...</a><br/></td></tr>
<tr class="separator:aaafead940bad08c4132e1fc1d712297a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03e92b00fdd8ef74fe2b93a0c8ca6512"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a03e92b00fdd8ef74fe2b93a0c8ca6512">qb_log_target_format</a> (int32_t target, struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a> *cs, struct timespec *timestamp, const char *formatted_message, char *output_buffer)</td></tr>
<tr class="memdesc:a03e92b00fdd8ef74fe2b93a0c8ca6512"><td class="mdescLeft">&#160;</td><td class="mdescRight">Format the callsite and timestamp info according to the format.  <a href="#a03e92b00fdd8ef74fe2b93a0c8ca6512">More...</a><br/></td></tr>
<tr class="separator:a03e92b00fdd8ef74fe2b93a0c8ca6512"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad57c3bef32372415ec62b3f500a0e174"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#ad57c3bef32372415ec62b3f500a0e174">qb_log_facility2int</a> (const char *fname)</td></tr>
<tr class="memdesc:ad57c3bef32372415ec62b3f500a0e174"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert string "auth" to equivalent number "LOG_AUTH" etc.  <a href="#ad57c3bef32372415ec62b3f500a0e174">More...</a><br/></td></tr>
<tr class="separator:ad57c3bef32372415ec62b3f500a0e174"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac973c7e30ed57b8e5d868deb83b630de"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#ac973c7e30ed57b8e5d868deb83b630de">qb_log_facility2str</a> (int32_t fnum)</td></tr>
<tr class="memdesc:ac973c7e30ed57b8e5d868deb83b630de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert number "LOG_AUTH" to equivalent string "auth" etc.  <a href="#ac973c7e30ed57b8e5d868deb83b630de">More...</a><br/></td></tr>
<tr class="separator:ac973c7e30ed57b8e5d868deb83b630de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:afa24a6ca95b4977cec3238001927aa22"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#afa24a6ca95b4977cec3238001927aa22">function</a></td></tr>
<tr class="separator:afa24a6ca95b4977cec3238001927aa22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7efa5e9c7494c7d4586359300221aa5d"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a></td></tr>
<tr class="separator:a7efa5e9c7494c7d4586359300221aa5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bd2bb5fcc7628a640958994a22f997c"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a6bd2bb5fcc7628a640958994a22f997c">format</a></td></tr>
<tr class="separator:a6bd2bb5fcc7628a640958994a22f997c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ad043071ccc7a261d79a759dc9c6f0c"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a></td></tr>
<tr class="separator:a0ad043071ccc7a261d79a759dc9c6f0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf2f4915fcc5d70ac361c73b683fc6ac"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#abf2f4915fcc5d70ac361c73b683fc6ac">lineno</a></td></tr>
<tr class="separator:abf2f4915fcc5d70ac361c73b683fc6ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a210bb1d2223f955a06ea3eb0a25bdb42"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#a210bb1d2223f955a06ea3eb0a25bdb42">targets</a></td></tr>
<tr class="separator:a210bb1d2223f955a06ea3eb0a25bdb42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3fc73ca2f0f032be6ea70f9e9cb8837"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#ac3fc73ca2f0f032be6ea70f9e9cb8837">tags</a></td></tr>
<tr class="separator:ac3fc73ca2f0f032be6ea70f9e9cb8837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad39ae5c69ec4ab889ad96a694fc5a682"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046a">qb_log_target_slot</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qblog_8h.html#ad39ae5c69ec4ab889ad96a694fc5a682">__attribute__</a></td></tr>
<tr class="separator:ad39ae5c69ec4ab889ad96a694fc5a682"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The logging API provides four main parts (basics, filtering, threading &amp; blackbox). </p>
<p>The idea behind this logging system is not to be prescriptive but to provide a set of tools to help the developer achieve what they want quickly and easily.</p>
<dl class="section user"><dt>Basic logging API.</dt><dd>Call <a class="el" href="qblog_8h.html#ac1dcd0ac044680eead32eae864928d71" title="This is the main function to generate a log message. ">qb_log()</a> to generate a log message. Then to write the message somewhere meaningful call <a class="el" href="qblog_8h.html#ab19da4babdb23834a25e5865016fb02d" title="Main logging control function. ">qb_log_ctl()</a> to configure the targets.</dd></dl>
<p>Simplest possible use: </p>
<div class="fragment"><div class="line">main() {</div>
<div class="line">     <a class="code" href="qblog_8h.html#a4261a1e62a9195139290b15793b8c4bc">qb_log_init</a>(<span class="stringliteral">&quot;simple-log&quot;</span>, LOG_DAEMON, LOG_INFO);</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">     <a class="code" href="qblog_8h.html#ac1dcd0ac044680eead32eae864928d71">qb_log</a>(LOG_WARNING, <span class="stringliteral">&quot;watch out&quot;</span>);</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">     <a class="code" href="qblog_8h.html#ad6b19c2d1c4de938418820a81d5d622c">qb_log_fini</a>();</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section user"><dt>Configuring log targets.</dt><dd>A log target can be syslog, stderr, the blackbox, stdout, or a text file. By default, only syslog is enabled. While this is usual for daemons, it is rarely appropriate for ordinary programs, which should disable it when other targets (see below) are to be used: <div class="fragment"><div class="line"><a class="code" href="qblog_8h.html#ab19da4babdb23834a25e5865016fb02d">qb_log_ctl</a>(B_LOG_SYSLOG, <a class="code" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5a05b84aca7698c88c32fed66d60821771">QB_LOG_CONF_ENABLED</a>, <a class="code" href="qbdefs_8h.html#a3adfa550658b3082a867536d5bcb87d8">QB_FALSE</a>);</div>
</div><!-- fragment --></dd></dl>
<p>To enable a target do the following: </p>
<div class="fragment"><div class="line"><a class="code" href="qblog_8h.html#ab19da4babdb23834a25e5865016fb02d">qb_log_ctl</a>(<a class="code" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa178ee41f37914617d5d86caf651dab5e">QB_LOG_BLACKBOX</a>, <a class="code" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5a05b84aca7698c88c32fed66d60821771">QB_LOG_CONF_ENABLED</a>, <a class="code" href="qbdefs_8h.html#aa53d378f26033634af24bd526090073e">QB_TRUE</a>);</div>
</div><!-- fragment --><p>syslog, stderr, the blackbox, and stdout are static (they don't need to be created, just enabled or disabled). However, you can open multiple logfiles (falling within inclusive range <code>QB_LOG_TARGET_DYNAMIC_START</code> up to <code>QB_LOG_TARGET_DYNAMIC_END</code>). To do this, use the following code: </p>
<div class="fragment"><div class="line">mytarget = <a class="code" href="qblog_8h.html#a46abb926947f450d5d66255ffd13ef4f">qb_log_file_open</a>(<span class="stringliteral">&quot;/var/log/mylogfile&quot;</span>);</div>
<div class="line"><a class="code" href="qblog_8h.html#ab19da4babdb23834a25e5865016fb02d">qb_log_ctl</a>(mytarget, <a class="code" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5a05b84aca7698c88c32fed66d60821771">QB_LOG_CONF_ENABLED</a>, <a class="code" href="qbdefs_8h.html#aa53d378f26033634af24bd526090073e">QB_TRUE</a>);</div>
</div><!-- fragment --><p>Once your targets are enabled/opened, you can configure them as follows: Configure the size of blackbox: </p>
<div class="fragment"><div class="line"><a class="code" href="qblog_8h.html#ab19da4babdb23834a25e5865016fb02d">qb_log_ctl</a>(<a class="code" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa178ee41f37914617d5d86caf651dab5e">QB_LOG_BLACKBOX</a>, <a class="code" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5a89f358b4a83f94b1efd0e6942506f24d">QB_LOG_CONF_SIZE</a>, 1024*10);</div>
</div><!-- fragment --><p>Make logging to file threaded: </p>
<div class="fragment"><div class="line"><a class="code" href="qblog_8h.html#ab19da4babdb23834a25e5865016fb02d">qb_log_ctl</a>(mytarget, <a class="code" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5a190db017221bea9bc7c3683ca0dcd023">QB_LOG_CONF_THREADED</a>, <a class="code" href="qbdefs_8h.html#aa53d378f26033634af24bd526090073e">QB_TRUE</a>);</div>
</div><!-- fragment --><p>Sometimes, syslog daemons are (pre)configured to filter messages not exceeding a particular priority. When this happens to be the logging target, the designated priority of the message is passed along unchanged, possibly resulting in message loss. For messages up to <code>LOG_DEBUG</code> importance, this can be worked around by proportionally bumping the priorities to be passed to syslog (here, the step is such that <code>LOG_DEBUG</code> gets promoted to <code>LOG_INFO</code>): </p>
<div class="fragment"><div class="line"><a class="code" href="qblog_8h.html#ab19da4babdb23834a25e5865016fb02d">qb_log_ctl</a>(<a class="code" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa3811428d4ed722d87211411146622ad4">QB_LOG_SYSLOG</a>, <a class="code" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5a9b7cdd1040ac89368d7d10c3caa65c2d">QB_LOG_CONF_PRIORITY_BUMP</a>,</div>
<div class="line">           LOG_INFO - LOG_DEBUG);</div>
</div><!-- fragment --><p>To ensure all logs to file targets are fsync'ed (new messages expressly transferred to the storage device as they keep coming, otherwise defaults to <code>QB_FALSE</code>): </p>
<div class="fragment"><div class="line"><a class="code" href="qblog_8h.html#ab19da4babdb23834a25e5865016fb02d">qb_log_ctl</a>(mytarget, <a class="code" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5abdebc9d9e19cfa3fa4afd5f744260301">QB_LOG_CONF_FILE_SYNC</a>, <a class="code" href="qbdefs_8h.html#aa53d378f26033634af24bd526090073e">QB_TRUE</a>);</div>
</div><!-- fragment --><dl class="section user"><dt>Filtering messages.</dt><dd>To have more power over what log messages go to which target you can apply filters to the targets. What happens is the desired callsites have the correct bit set. Then when the log message is generated it gets sent to the targets based on which bit is set in the callsite's "target" bitmap. Messages can be filtered based on the:<ol type="1">
<li>filename + priority</li>
<li>function name + priority</li>
<li>format string + priority</li>
</ol>
</dd></dl>
<p>So to make all logs from evil_function() go to stderr, do the following: </p>
<div class="fragment"><div class="line"><a class="code" href="qblog_8h.html#a687531ff2f457ea5fe63dc91f74be783">qb_log_filter_ctl</a>(<a class="code" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa7667606d44f7b11302762237dff2b8ad">QB_LOG_STDERR</a>, <a class="code" href="qblog_8h.html#a0bcfbbefc6d73b62e72b135ff29fe03faaae48ba27a8dafc2163aaf9637d5ce2f">QB_LOG_FILTER_ADD</a>,</div>
<div class="line">             <a class="code" href="qblog_8h.html#aa23b899fd898c0c999357532f187fc0fa8991c590b0aa0c3179a8512fbdae9509">QB_LOG_FILTER_FUNCTION</a>, <span class="stringliteral">&quot;evil_function&quot;</span>, <a class="code" href="qblog_8h.html#af7abc145380f1916838e42f9272aa0f6">LOG_TRACE</a>);</div>
</div><!-- fragment --><p>So to make all logs from totem* (with a priority &lt;= LOG_INFO) go to stderr, do the following: </p>
<div class="fragment"><div class="line"><a class="code" href="qblog_8h.html#a687531ff2f457ea5fe63dc91f74be783">qb_log_filter_ctl</a>(<a class="code" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa7667606d44f7b11302762237dff2b8ad">QB_LOG_STDERR</a>, <a class="code" href="qblog_8h.html#a0bcfbbefc6d73b62e72b135ff29fe03faaae48ba27a8dafc2163aaf9637d5ce2f">QB_LOG_FILTER_ADD</a>,</div>
<div class="line">             <a class="code" href="qblog_8h.html#aa23b899fd898c0c999357532f187fc0fa868c37c795816ee3d64143c4090afbb6">QB_LOG_FILTER_FILE</a>, <span class="stringliteral">&quot;totem&quot;</span>, LOG_INFO);</div>
</div><!-- fragment --><p>So to make all logs with the substring "ringbuffer" go to stderr, do the following: </p>
<div class="fragment"><div class="line"><a class="code" href="qblog_8h.html#a687531ff2f457ea5fe63dc91f74be783">qb_log_filter_ctl</a>(<a class="code" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa7667606d44f7b11302762237dff2b8ad">QB_LOG_STDERR</a>, <a class="code" href="qblog_8h.html#a0bcfbbefc6d73b62e72b135ff29fe03faaae48ba27a8dafc2163aaf9637d5ce2f">QB_LOG_FILTER_ADD</a>,</div>
<div class="line">             <a class="code" href="qblog_8h.html#aa23b899fd898c0c999357532f187fc0faa12df6f8f73d22379661a8f94d69850f">QB_LOG_FILTER_FORMAT</a>, <span class="stringliteral">&quot;ringbuffer&quot;</span>, <a class="code" href="qblog_8h.html#af7abc145380f1916838e42f9272aa0f6">LOG_TRACE</a>);</div>
</div><!-- fragment --><dl class="section user"><dt>Thread safe non-blocking logging.</dt><dd>Logging is only thread safe when threaded logging is in use. If you plan on logging from multiple threads, you must initialize libqb's logger thread and use qb_log_filter_ctl to set the QB_LOG_CONF_THREADED flag on all the logging targets in use.</dd></dl>
<p>To achieve non-blocking logging, so that any calls to write() or syslog() will not hold up your program, you can use threaded logging as well.</p>
<p>Threaded logging use: </p>
<div class="fragment"><div class="line">main() {</div>
<div class="line">     <a class="code" href="qblog_8h.html#a4261a1e62a9195139290b15793b8c4bc">qb_log_init</a>(<span class="stringliteral">&quot;simple-log&quot;</span>, LOG_DAEMON, LOG_INFO);</div>
<div class="line">     <a class="code" href="qblog_8h.html#ab19da4babdb23834a25e5865016fb02d">qb_log_ctl</a>(<a class="code" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa3811428d4ed722d87211411146622ad4">QB_LOG_SYSLOG</a>, <a class="code" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5a190db017221bea9bc7c3683ca0dcd023">QB_LOG_CONF_THREADED</a>, <a class="code" href="qbdefs_8h.html#aa53d378f26033634af24bd526090073e">QB_TRUE</a>);</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">        daemonize();</div>
<div class="line">        <span class="comment">// call this after you fork()</span></div>
<div class="line">        <a class="code" href="qblog_8h.html#aa93049df374b16e48e352327d02be156">qb_log_thread_start</a>();</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">     <a class="code" href="qblog_8h.html#ac1dcd0ac044680eead32eae864928d71">qb_log</a>(LOG_WARNING, <span class="stringliteral">&quot;watch out&quot;</span>);</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">     <a class="code" href="qblog_8h.html#ad6b19c2d1c4de938418820a81d5d622c">qb_log_fini</a>();</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section user"><dt>A blackbox for in-field diagnosis.</dt><dd>This stores log messages in a ringbuffer so they can be written to file if the program crashes (you will need to catch SIGSEGV). These can then be easily printed out later.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>the blackbox is not enabled by default.</dd></dl>
<p>Blackbox usage: </p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> sigsegv_handler(<span class="keywordtype">int</span> sig)</div>
<div class="line">{</div>
<div class="line">        (void)signal (SIGSEGV, SIG_DFL);</div>
<div class="line">        <a class="code" href="qblog_8h.html#aeb2f3aaaa5c32b994e0dc9069bb50ce6">qb_log_blackbox_write_to_file</a>(<span class="stringliteral">&quot;simple-log.fdata&quot;</span>);</div>
<div class="line">        <a class="code" href="qblog_8h.html#ad6b19c2d1c4de938418820a81d5d622c">qb_log_fini</a>();</div>
<div class="line">        <span class="keyword">raise</span>(SIGSEGV);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">main() {</div>
<div class="line"></div>
<div class="line">     signal(SIGSEGV, sigsegv_handler);</div>
<div class="line"></div>
<div class="line">     <a class="code" href="qblog_8h.html#a4261a1e62a9195139290b15793b8c4bc">qb_log_init</a>(<span class="stringliteral">&quot;simple-log&quot;</span>, LOG_DAEMON, LOG_INFO);</div>
<div class="line">     <a class="code" href="qblog_8h.html#a687531ff2f457ea5fe63dc91f74be783">qb_log_filter_ctl</a>(<a class="code" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa178ee41f37914617d5d86caf651dab5e">QB_LOG_BLACKBOX</a>, <a class="code" href="qblog_8h.html#a0bcfbbefc6d73b62e72b135ff29fe03faaae48ba27a8dafc2163aaf9637d5ce2f">QB_LOG_FILTER_ADD</a>,</div>
<div class="line">                  <a class="code" href="qblog_8h.html#aa23b899fd898c0c999357532f187fc0fa868c37c795816ee3d64143c4090afbb6">QB_LOG_FILTER_FILE</a>, <span class="stringliteral">&quot;*&quot;</span>, LOG_DEBUG);</div>
<div class="line">     <a class="code" href="qblog_8h.html#ab19da4babdb23834a25e5865016fb02d">qb_log_ctl</a>(<a class="code" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa178ee41f37914617d5d86caf651dab5e">QB_LOG_BLACKBOX</a>, <a class="code" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5a89f358b4a83f94b1efd0e6942506f24d">QB_LOG_CONF_SIZE</a>, 1024*10);</div>
<div class="line">     <a class="code" href="qblog_8h.html#ab19da4babdb23834a25e5865016fb02d">qb_log_ctl</a>(<a class="code" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa178ee41f37914617d5d86caf651dab5e">QB_LOG_BLACKBOX</a>, <a class="code" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5a05b84aca7698c88c32fed66d60821771">QB_LOG_CONF_ENABLED</a>, <a class="code" href="qbdefs_8h.html#aa53d378f26033634af24bd526090073e">QB_TRUE</a>);</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">     <a class="code" href="qblog_8h.html#ac1dcd0ac044680eead32eae864928d71">qb_log</a>(LOG_WARNING, <span class="stringliteral">&quot;watch out&quot;</span>);</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">     <a class="code" href="qblog_8h.html#ad6b19c2d1c4de938418820a81d5d622c">qb_log_fini</a>();</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section user"><dt>Tagging messages.</dt><dd>You can tag messages using the second argument to <a class="el" href="qblog_8h.html#a4d29d79cd6bd07e06da9fb56251922f9" title="This is the function to generate a log message if you want to manually add tags. ">qb_logt()</a> or by using <a class="el" href="qblog_8h.html#a687531ff2f457ea5fe63dc91f74be783" title="This allows you modify the &#39;tags&#39; and &#39;targets&#39; callsite fields at runtime. ">qb_log_filter_ctl()</a>. This can be used to add feature or sub-system information to the logs.</dd></dl>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* my_tags_stringify(uint32_t <a class="code" href="qblog_8h.html#ac3fc73ca2f0f032be6ea70f9e9cb8837">tags</a>) {</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="qbdefs_8h.html#a429078697a3e130797201e1377bd3fdf">qb_bit_is_set</a>(tags, <a class="code" href="qblog_8h.html#ac357216b86a3fb153c6422c2a44eb0ee">QB_LOG_TAG_LIBQB_MSG_BIT</a>) {</div>
<div class="line">                <span class="keywordflow">return</span> <span class="stringliteral">&quot;libqb&quot;</span>;</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tags == 3) {</div>
<div class="line">                <span class="keywordflow">return</span> <span class="stringliteral">&quot;three&quot;</span>;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="keywordflow">return</span> <span class="stringliteral">&quot;MAIN&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">}</div>
<div class="line">main() {</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">        <a class="code" href="qblog_8h.html#a84d94e1a167006c7f69407a56db18291">qb_log_tags_stringify_fn_set</a>(my_tags_stringify);</div>
<div class="line">        <a class="code" href="qblog_8h.html#a0e8cf298ff5fd224a16537b30a899df9">qb_log_format_set</a>(<a class="code" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa7667606d44f7b11302762237dff2b8ad">QB_LOG_STDERR</a>, <span class="stringliteral">&quot;[%5g] %p %b&quot;</span>);</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">        <a class="code" href="qblog_8h.html#a4d29d79cd6bd07e06da9fb56251922f9">qb_logt</a>(LOG_INFO, 3, <span class="stringliteral">&quot;hello&quot;</span>);</div>
<div class="line">        <a class="code" href="qblog_8h.html#a4d29d79cd6bd07e06da9fb56251922f9">qb_logt</a>(LOG_INFO, 0, <span class="stringliteral">&quot;hello&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --><p> The code above will produce: </p>
<div class="fragment"><div class="line">[libqb] some message</div>
<div class="line">[three] info hello</div>
<div class="line">[MAIN ] info hello</div>
</div><!-- fragment --> </div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="af7abc145380f1916838e42f9272aa0f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_TRACE&#160;&#160;&#160;(LOG_DEBUG + 1)</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcclient_8c-example.html#a14">ipcclient.c</a>, <a class="el" href="ipcserver_8c-example.html#a29">ipcserver.c</a>, and <a class="el" href="simplelog_8c-example.html#a34">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a952560e8e2bc7e6221f46e5f06485ff7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define qb_enter</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="qblog_8h.html#ac1dcd0ac044680eead32eae864928d71">qb_log</a>(<a class="el" href="qblog_8h.html#af7abc145380f1916838e42f9272aa0f6">LOG_TRACE</a>, &quot;ENTERING %s()&quot;, __func__)</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="simplelog_8c-example.html#a0">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a3b0da0b1067b7541bff8a39123dfdc5e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QB_FEATURE_LOG_HIRES_TIMESTAMPS&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is a Feature Test macro so that calling applications know that millisecond timestamps are implemented. </p>
<p>Because T a string in function call with an indirect effect, there is no easy test for it beyond the library version (which is a very blunt instrument) </p>

</div>
</div>
<a class="anchor" id="a5c561626e0f2f23f595c43468d6f674e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define qb_leave</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="qblog_8h.html#ac1dcd0ac044680eead32eae864928d71">qb_log</a>(<a class="el" href="qblog_8h.html#af7abc145380f1916838e42f9272aa0f6">LOG_TRACE</a>, &quot;LEAVING %s()&quot;, __func__)</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="simplelog_8c-example.html#a4">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ac1dcd0ac044680eead32eae864928d71"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define qb_log</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="qblog_8h.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fmt, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">args...&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="qblog_8h.html#a4d29d79cd6bd07e06da9fb56251922f9">qb_logt</a>(<a class="el" href="qblog_8h.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a>, 0, fmt, ##args)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the main function to generate a log message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">priority</td><td>this takes syslog priorities. </td></tr>
    <tr><td class="paramname">fmt</td><td>usual printf style format specifiers </td></tr>
    <tr><td class="paramname">args</td><td>usual printf style args </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcserver_8c-example.html#a1">ipcserver.c</a>, and <a class="el" href="simplelog_8c-example.html#a2">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a34b5e8e6b0a03570f6a3f9c16ac2d25d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QB_LOG_ABSOLUTE_MAX_LEN&#160;&#160;&#160;4096</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0725a5e352bfc89fded7eeca34c632da"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QB_LOG_CTL2_I32</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a</td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="unionqb__log__ctl2__arg__t.html">qb_log_ctl2_arg_t</a>) { .i32 = (a) })</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af8f739f89165037702989ccbee21ebee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QB_LOG_CTL2_S</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a</td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="unionqb__log__ctl2__arg__t.html">qb_log_ctl2_arg_t</a>) { .s = (a) })</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa45df798479eefe727127618de4c9201"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QB_LOG_INIT_DATA</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a47e2618c6393e677b6001f7836ad4055"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QB_LOG_MAX_LEN&#160;&#160;&#160;512</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="simplelog_8c-example.html#a14">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ad410b068561e8f4216ef15a11bf618e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QB_LOG_STRERROR_MAX_LEN&#160;&#160;&#160;128</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a5a525f6c4ab37daa6e7622916a22f524"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QB_LOG_TAG_LIBQB_MSG&#160;&#160;&#160;(1U &lt;&lt; QB_LOG_TAG_LIBQB_MSG_BIT)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac357216b86a3fb153c6422c2a44eb0ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QB_LOG_TAG_LIBQB_MSG_BIT&#160;&#160;&#160;31</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="simplelog_8c-example.html#a12">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a4d29d79cd6bd07e06da9fb56251922f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define qb_logt</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="qblog_8h.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="qblog_8h.html#ac3fc73ca2f0f032be6ea70f9e9cb8837">tags</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fmt, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">args...&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {    \</div>
<div class="line">        struct <a class="code" href="structqb__log__callsite.html">qb_log_callsite</a>* descriptor_pt =         <a class="code" href="qblog_8h.html#a052e886bfd25c6e776ae10b1801c411b">\</a></div>
<div class="line"><a class="code" href="qblog_8h.html#a052e886bfd25c6e776ae10b1801c411b">	qb_log_callsite_get</a>(__func__, __FILE__, fmt,   \</div>
<div class="line">                            <a class="code" href="qblog_8h.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a>, __LINE__, <a class="code" href="qblog_8h.html#ac3fc73ca2f0f032be6ea70f9e9cb8837">tags</a>);  <a class="code" href="qblog_8h.html#a0f8d3c208586320bc01c76fad242ae2f">\</a></div>
<div class="line"><a class="code" href="qblog_8h.html#a0f8d3c208586320bc01c76fad242ae2f">	qb_log_real_</a>(descriptor_pt, ##args);           \</div>
<div class="line">    } <span class="keywordflow">while</span>(0)</div>
<div class="ttc" id="qblog_8h_html_a0ad043071ccc7a261d79a759dc9c6f0c"><div class="ttname"><a href="qblog_8h.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a></div><div class="ttdeci">uint8_t priority</div><div class="ttdef"><b>Definition:</b> qblog.h:252</div></div>
<div class="ttc" id="structqb__log__callsite_html"><div class="ttname"><a href="structqb__log__callsite.html">qb_log_callsite</a></div><div class="ttdoc">An instance of this structure is created for each log message. </div><div class="ttdef"><b>Definition:</b> qblog.h:253</div></div>
<div class="ttc" id="qblog_8h_html_ac3fc73ca2f0f032be6ea70f9e9cb8837"><div class="ttname"><a href="qblog_8h.html#ac3fc73ca2f0f032be6ea70f9e9cb8837">tags</a></div><div class="ttdeci">uint32_t tags</div><div class="ttdef"><b>Definition:</b> qblog.h:255</div></div>
<div class="ttc" id="qblog_8h_html_a052e886bfd25c6e776ae10b1801c411b"><div class="ttname"><a href="qblog_8h.html#a052e886bfd25c6e776ae10b1801c411b">qb_log_callsite_get</a></div><div class="ttdeci">void struct qb_log_callsite * qb_log_callsite_get(const char *function, const char *filename, const char *format, uint8_t priority, uint32_t lineno, uint32_t tags)</div><div class="ttdoc">Get or create a callsite at the given position. </div></div>
<div class="ttc" id="qblog_8h_html_a0f8d3c208586320bc01c76fad242ae2f"><div class="ttname"><a href="qblog_8h.html#a0f8d3c208586320bc01c76fad242ae2f">qb_log_real_</a></div><div class="ttdeci">void qb_log_real_(struct qb_log_callsite *cs,...)</div><div class="ttdoc">Internal function: use qb_log() or qb_logt() </div></div>
</div><!-- fragment -->
<p>This is the function to generate a log message if you want to manually add tags. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">priority</td><td>this takes syslog priorities. </td></tr>
    <tr><td class="paramname">tags</td><td>this is a uint32_t that you can use with <a class="el" href="qblog_8h.html#a84d94e1a167006c7f69407a56db18291" title="Set the callback to map the &#39;tags&#39; bit map to a string. ">qb_log_tags_stringify_fn_set()</a> to "tag" a log message with a feature or sub-system then you can use "%g" in the format specifer to print it out. </td></tr>
    <tr><td class="paramname">fmt</td><td>usual printf style format specifiers </td></tr>
    <tr><td class="paramname">args</td><td>usual printf style args </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="simplelog_8c-example.html#a1">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a61d34b7974bdac7471a3b94b232bbf48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define qb_perror</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="qblog_8h.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fmt, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">args...&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                            \</div>
<div class="line">        char _perr_buf_[<a class="code" href="qblog_8h.html#ad410b068561e8f4216ef15a11bf618e1">QB_LOG_STRERROR_MAX_LEN</a>];                       \</div>
<div class="line">        const <span class="keywordtype">char</span> *_perr_str_ = <a class="code" href="qbutil_8h.html#a38b1db1a66d45bfc34e40941931784ba">qb_strerror_r</a>(errno, _perr_buf_, <span class="keyword">sizeof</span>(_perr_buf_));  <a class="code" href="qblog_8h.html#a4d29d79cd6bd07e06da9fb56251922f9">\</a></div>
<div class="line"><a class="code" href="qblog_8h.html#a4d29d79cd6bd07e06da9fb56251922f9">	qb_logt</a>(<a class="code" href="qblog_8h.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a>, 0, fmt <span class="stringliteral">&quot;: %s (%d)&quot;</span>, ##args, _perr_str_, errno); \</div>
<div class="line">    } <span class="keywordflow">while</span>(0)</div>
<div class="ttc" id="qbutil_8h_html_a38b1db1a66d45bfc34e40941931784ba"><div class="ttname"><a href="qbutil_8h.html#a38b1db1a66d45bfc34e40941931784ba">qb_strerror_r</a></div><div class="ttdeci">char * qb_strerror_r(int errnum, char *buf, size_t buflen)</div><div class="ttdoc">strerror_r replacement. </div></div>
<div class="ttc" id="qblog_8h_html_a0ad043071ccc7a261d79a759dc9c6f0c"><div class="ttname"><a href="qblog_8h.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a></div><div class="ttdeci">uint8_t priority</div><div class="ttdef"><b>Definition:</b> qblog.h:252</div></div>
<div class="ttc" id="qblog_8h_html_a4d29d79cd6bd07e06da9fb56251922f9"><div class="ttname"><a href="qblog_8h.html#a4d29d79cd6bd07e06da9fb56251922f9">qb_logt</a></div><div class="ttdeci">#define qb_logt(priority, tags, fmt, args...)</div><div class="ttdoc">This is the function to generate a log message if you want to manually add tags. </div><div class="ttdef"><b>Definition:</b> qblog.h:343</div></div>
<div class="ttc" id="qblog_8h_html_ad410b068561e8f4216ef15a11bf618e1"><div class="ttname"><a href="qblog_8h.html#ad410b068561e8f4216ef15a11bf618e1">QB_LOG_STRERROR_MAX_LEN</a></div><div class="ttdeci">#define QB_LOG_STRERROR_MAX_LEN</div><div class="ttdef"><b>Definition:</b> qblog.h:246</div></div>
</div><!-- fragment -->
<p>This is similar to perror except it goes into the logging system. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">priority</td><td>this takes syslog priorities. </td></tr>
    <tr><td class="paramname">fmt</td><td>usual printf style format specifiers </td></tr>
    <tr><td class="paramname">args</td><td>usual printf style args</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Because <a class="el" href="qblog_8h.html#a61d34b7974bdac7471a3b94b232bbf48" title="This is similar to perror except it goes into the logging system. ">qb_perror()</a> adds the system error message and error number onto the end of the given fmt, that information will become extended information if QB_XS is used inside fmt and will not show up in any logs that strip extended information. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcserver_8c-example.html#a11">ipcserver.c</a>, and <a class="el" href="simplelog_8c-example.html#a3">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a601c7f30780283d3ed37f7cb03254df7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QB_XC&#160;&#160;&#160;'\a'</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7df20856e4b89400662e1ccd1c0c50a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QB_XS&#160;&#160;&#160;&quot;\a&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ad7856553373280fb1635ec41d3ed54c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* qb_log_close_fn)(int32_t t)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a93201b3c845e5933316909caf17d0a16"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* qb_log_filter_fn)(struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a> *cs)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a6506923a971787a5d41e7c0ef2a8ee69"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* qb_log_logger_fn)(int32_t t, struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a> *cs, struct timespec *timestamp, const char *msg)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a71aa235e6172aae51be7c3e0e5da30f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* qb_log_reload_fn)(int32_t t)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab19163fc57662a18df611df6e4939016"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef const char*(* qb_log_tags_stringify_fn)(uint32_t <a class="el" href="qblog_8h.html#ac3fc73ca2f0f032be6ea70f9e9cb8837">tags</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="afe3c9333af437562f22c3186ae5f8bc8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* qb_log_vlogger_fn)(int32_t t, struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a> *cs, struct timespec *timestamp, va_list ap)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="aaa6a5dea031c8dc88fbd6d38fd72dee5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5">qb_log_conf</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="aaa6a5dea031c8dc88fbd6d38fd72dee5a05b84aca7698c88c32fed66d60821771"></a>QB_LOG_CONF_ENABLED</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aaa6a5dea031c8dc88fbd6d38fd72dee5a898bc61034dc2331544899fd42057e3a"></a>QB_LOG_CONF_FACILITY</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aaa6a5dea031c8dc88fbd6d38fd72dee5a4a4c656414f452630627342f3680e6d6"></a>QB_LOG_CONF_DEBUG</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aaa6a5dea031c8dc88fbd6d38fd72dee5a89f358b4a83f94b1efd0e6942506f24d"></a>QB_LOG_CONF_SIZE</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aaa6a5dea031c8dc88fbd6d38fd72dee5a190db017221bea9bc7c3683ca0dcd023"></a>QB_LOG_CONF_THREADED</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aaa6a5dea031c8dc88fbd6d38fd72dee5a9b7cdd1040ac89368d7d10c3caa65c2d"></a>QB_LOG_CONF_PRIORITY_BUMP</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aaa6a5dea031c8dc88fbd6d38fd72dee5ae722558db8b80fcc52eafff69277d578"></a>QB_LOG_CONF_STATE_GET</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aaa6a5dea031c8dc88fbd6d38fd72dee5abdebc9d9e19cfa3fa4afd5f744260301"></a>QB_LOG_CONF_FILE_SYNC</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aaa6a5dea031c8dc88fbd6d38fd72dee5ae5ec90515c983b1000e99378a81977c5"></a>QB_LOG_CONF_EXTENDED</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aaa6a5dea031c8dc88fbd6d38fd72dee5a43093841b0cc7ba22c5c5c1b59aa5aad"></a>QB_LOG_CONF_IDENT</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aaa6a5dea031c8dc88fbd6d38fd72dee5a22bb93c2df93527925029d8632a49e72"></a>QB_LOG_CONF_MAX_LINE_LEN</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aaa6a5dea031c8dc88fbd6d38fd72dee5ab51171e9560e53e7481ece3334fa2687"></a>QB_LOG_CONF_ELLIPSIS</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aaa6a5dea031c8dc88fbd6d38fd72dee5afd570cf662115801ec4d5a412362e55e"></a>QB_LOG_CONF_USE_JOURNAL</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="a0bcfbbefc6d73b62e72b135ff29fe03f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="qblog_8h.html#a0bcfbbefc6d73b62e72b135ff29fe03f">qb_log_filter_conf</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a0bcfbbefc6d73b62e72b135ff29fe03faaae48ba27a8dafc2163aaf9637d5ce2f"></a>QB_LOG_FILTER_ADD</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a0bcfbbefc6d73b62e72b135ff29fe03fa80750aff80ec3c6a9bc8d9fb111ecf8c"></a>QB_LOG_FILTER_REMOVE</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a0bcfbbefc6d73b62e72b135ff29fe03fa42ee1aa5bd4edf7702888e88bba0447e"></a>QB_LOG_FILTER_CLEAR_ALL</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a0bcfbbefc6d73b62e72b135ff29fe03faa704eb536e18533392f81508ca95912b"></a>QB_LOG_TAG_SET</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a0bcfbbefc6d73b62e72b135ff29fe03fabe9d7d79fd1a239767127ee3eb7c2c93"></a>QB_LOG_TAG_CLEAR</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a0bcfbbefc6d73b62e72b135ff29fe03fa1aabf35c9bfdbcef19b0df7e4c5cc6db"></a>QB_LOG_TAG_CLEAR_ALL</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="aa23b899fd898c0c999357532f187fc0f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="qblog_8h.html#aa23b899fd898c0c999357532f187fc0f">qb_log_filter_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="aa23b899fd898c0c999357532f187fc0fa868c37c795816ee3d64143c4090afbb6"></a>QB_LOG_FILTER_FILE</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aa23b899fd898c0c999357532f187fc0fa8991c590b0aa0c3179a8512fbdae9509"></a>QB_LOG_FILTER_FUNCTION</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aa23b899fd898c0c999357532f187fc0faa12df6f8f73d22379661a8f94d69850f"></a>QB_LOG_FILTER_FORMAT</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aa23b899fd898c0c999357532f187fc0fa38a1ba99c0323daf834880dbb466b1b6"></a>QB_LOG_FILTER_FILE_REGEX</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aa23b899fd898c0c999357532f187fc0fa162f8bfb4c5c5191ab400756fb6a9752"></a>QB_LOG_FILTER_FUNCTION_REGEX</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aa23b899fd898c0c999357532f187fc0fa1c18d1742b1886e10fa203890dc72e17"></a>QB_LOG_FILTER_FORMAT_REGEX</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="a461cac884ce0c9a80f069af15c6c046a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046a">qb_log_target_slot</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a461cac884ce0c9a80f069af15c6c046aadf21792ef072eac735a8afa1e4f1abaa"></a>QB_LOG_TARGET_START</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a461cac884ce0c9a80f069af15c6c046aa37d39a2b557e61d46749fafab5dd325b"></a>QB_LOG_TARGET_STATIC_START</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a461cac884ce0c9a80f069af15c6c046aa3811428d4ed722d87211411146622ad4"></a>QB_LOG_SYSLOG</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a461cac884ce0c9a80f069af15c6c046aa7667606d44f7b11302762237dff2b8ad"></a>QB_LOG_STDERR</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a461cac884ce0c9a80f069af15c6c046aa178ee41f37914617d5d86caf651dab5e"></a>QB_LOG_BLACKBOX</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a461cac884ce0c9a80f069af15c6c046aa4e83afef566371fa86bd3c4c87b336f9"></a>QB_LOG_STDOUT</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a461cac884ce0c9a80f069af15c6c046aa424e52ac21db1e1a42635c280a0096af"></a>QB_LOG_TARGET_STATIC_MAX</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a461cac884ce0c9a80f069af15c6c046aa0f48c96c5b26c5fd064b811103e67568"></a>QB_LOG_TARGET_STATIC_END</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a461cac884ce0c9a80f069af15c6c046aa64a37f37d97040049d5c42ac510bcf2e"></a>QB_LOG_TARGET_DYNAMIC_START</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a461cac884ce0c9a80f069af15c6c046aa3eb29c1dd2f6004cf1c115c35d6936e9"></a>QB_LOG_TARGET_MAX</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a461cac884ce0c9a80f069af15c6c046aa476692f3852d8586de7a8f231a2bcb0d"></a>QB_LOG_TARGET_DYNAMIC_END</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a461cac884ce0c9a80f069af15c6c046aa59767cd8657ff66a3945159ffa5bd624"></a>QB_LOG_TARGET_END</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="a5d11a68334e40bbb180ad8e237f92c4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="qblog_8h.html#a5d11a68334e40bbb180ad8e237f92c4f">qb_log_target_state</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a5d11a68334e40bbb180ad8e237f92c4faccec5c7247423cbc82bbb174689c44c1"></a>QB_LOG_STATE_UNUSED</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a5d11a68334e40bbb180ad8e237f92c4fafd131bb03f5d0e4365c0350bc3da880c"></a>QB_LOG_STATE_DISABLED</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a5d11a68334e40bbb180ad8e237f92c4faf6d4c10e2cdc9d11daf3aeb86f917540"></a>QB_LOG_STATE_ENABLED</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ae2de5621cd0f2e33c27279f62c5d2f1f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a> __attribute__ </td>
          <td>(</td>
          <td class="paramtype">(aligned(8))&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a309c0939d95cb279fbf2fea4e5148515"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qb_log_blackbox_print_from_file </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the blackbox for file and print it out. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="simplelog_8c-example.html#a23">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="aeb2f3aaaa5c32b994e0dc9069bb50ce6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t qb_log_blackbox_write_to_file </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write the blackbox to file. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="simplelog_8c-example.html#a6">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a052e886bfd25c6e776ae10b1801c411b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a>* qb_log_callsite_get </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>lineno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get or create a callsite at the given position. </p>
<p>The result can then be passed into <a class="el" href="qblog_8h.html#a0f8d3c208586320bc01c76fad242ae2f" title="Internal function: use qb_log() or qb_logt() ">qb_log_real_()</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">function</td><td>originating function name </td></tr>
    <tr><td class="paramname">filename</td><td>originating filename </td></tr>
    <tr><td class="paramname">format</td><td>format string </td></tr>
    <tr><td class="paramname">priority</td><td>this takes syslog priorities. </td></tr>
    <tr><td class="paramname">lineno</td><td>file line number </td></tr>
    <tr><td class="paramname">tags</td><td>the tag </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abe8ec15ce16e90d65e9c6e452c113858"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_log_callsites_dump </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dump the callsite info to stdout. </p>

</div>
</div>
<a class="anchor" id="af9afece5ccc75cb3772da16e684653e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_log_callsites_register </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a> *&#160;</td>
          <td class="paramname"><em>_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a> *&#160;</td>
          <td class="paramname"><em>_stop</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If you are using dynamically loadable modules via dlopen() and you load them after <a class="el" href="qblog_8h.html#a4261a1e62a9195139290b15793b8c4bc" title="Init the logging system. ">qb_log_init()</a> then after you load the module you will need to do the following to get the filters to work in that module: </p>
<div class="fragment"><div class="line">   _start = dlsym (dl_handle, QB_ATTR_SECTION_START_STR);</div>
<div class="line">_stop = dlsym (dl_handle, QB_ATTR_SECTION_STOP_STR);</div>
<div class="line"><a class="code" href="qblog_8h.html#af9afece5ccc75cb3772da16e684653e9">qb_log_callsites_register</a>(_start, _stop);</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="ab19da4babdb23834a25e5865016fb02d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_log_ctl </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5">qb_log_conf</a>&#160;</td>
          <td class="paramname"><em>conf_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main logging control function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>QB_LOG_SYSLOG, QB_LOG_STDERR or result from <a class="el" href="qblog_8h.html#a46abb926947f450d5d66255ffd13ef4f" title="Open a log file. ">qb_log_file_open()</a> </td></tr>
    <tr><td class="paramname">conf_type</td><td>configuration directive ("what to configure") that accepts <code>int32_t</code> argument determining the new value unless ignored for particular directive altogether (incompatible directives: QB_LOG_CONF_IDENT) </td></tr>
    <tr><td class="paramname">arg</td><td>the new value for a state-changing configuration directive, ignored otherwise </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5">qb_log_conf</a></dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-errno</td><td>on error </td></tr>
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">qb_log_target_state</td><td>for QB_LOG_CONF_STATE_GET </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcclient_8c-example.html#a15">ipcclient.c</a>, <a class="el" href="ipcserver_8c-example.html#a35">ipcserver.c</a>, and <a class="el" href="simplelog_8c-example.html#a7">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ac2ce9d637e7f86e7f229e4956d1e0779"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_log_ctl2 </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="qblog_8h.html#aaa6a5dea031c8dc88fbd6d38fd72dee5">qb_log_conf</a>&#160;</td>
          <td class="paramname"><em>conf_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unionqb__log__ctl2__arg__t.html">qb_log_ctl2_arg_t</a>&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extension of main logging control function accepting also strings. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>QB_LOG_SYSLOG, QB_LOG_STDERR or result from <a class="el" href="qblog_8h.html#a46abb926947f450d5d66255ffd13ef4f" title="Open a log file. ">qb_log_file_open()</a> </td></tr>
    <tr><td class="paramname">conf_type</td><td>configuration directive ("what to configure") that accepts either <code>int32_t</code> or a null-terminated string argument determining the new value unless ignored for particular directive (compatible directives: those valid for qb_log_ctl<ul>
<li>QB_LOG_CONF_IDENT) </li>
</ul>
</td></tr>
    <tr><td class="paramname">arg</td><td>the new value for a state-changing configuration directive, ignored otherwise; for QB_LOG_CONF_IDENT, 's' member as new identifier to openlog(), for all qb_log_ctl-compatible ones, 'i32' member is assumed (although a preferred way is to use that original function directly as it allows for more type safety) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="qblog_8h.html#ab19da4babdb23834a25e5865016fb02d" title="Main logging control function. ">qb_log_ctl</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>You can use <a class="el" href="qblog_8h.html#a0725a5e352bfc89fded7eeca34c632da">QB_LOG_CTL2_I32</a> and <a class="el" href="qblog_8h.html#af8f739f89165037702989ccbee21ebee">QB_LOG_CTL2_S</a> macros for a convenient on-the-fly construction of the object to be passed as an <code>arg</code> argument. </dd></dl>

</div>
</div>
<a class="anchor" id="af9536c00784aaccaf3364d8c1f43be9a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_log_custom_close </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close a custom log target and release its resources. </p>

</div>
</div>
<a class="anchor" id="a59cc8c69b2dafaf854e0f35a1c87e563"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_log_custom_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qblog_8h.html#a6506923a971787a5d41e7c0ef2a8ee69">qb_log_logger_fn</a>&#160;</td>
          <td class="paramname"><em>log_fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qblog_8h.html#ad7856553373280fb1635ec41d3ed54c0">qb_log_close_fn</a>&#160;</td>
          <td class="paramname"><em>close_fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qblog_8h.html#a71aa235e6172aae51be7c3e0e5da30f6">qb_log_reload_fn</a>&#160;</td>
          <td class="paramname"><em>reload_fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a custom log target. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-errno</td><td>on error </td></tr>
    <tr><td class="paramname">value</td><td>in inclusive range QB_LOG_TARGET_DYNAMIC_START to QB_LOG_TARGET_DYNAMIC_END (to be passed into other qb_log_* functions) </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="simplelog_8c-example.html#a30">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ad57c3bef32372415ec62b3f500a0e174"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_log_facility2int </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert string "auth" to equivalent number "LOG_AUTH" etc. </p>

</div>
</div>
<a class="anchor" id="ac973c7e30ed57b8e5d868deb83b630de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* qb_log_facility2str </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>fnum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert number "LOG_AUTH" to equivalent string "auth" etc. </p>

</div>
</div>
<a class="anchor" id="afe1f4fc7c94f0ead2a08228721fae5e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_log_file_close </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close a log file and release its resources. </p>

</div>
</div>
<a class="anchor" id="a46abb926947f450d5d66255ffd13ef4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_log_file_open </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a log file. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-errno</td><td>on error </td></tr>
    <tr><td class="paramname">value</td><td>in inclusive range QB_LOG_TARGET_DYNAMIC_START to QB_LOG_TARGET_DYNAMIC_END (to be passed into other qb_log_* functions) </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="simplelog_8c-example.html#a39">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a93ce2e803162d16695a9e7264cf11393"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_log_file_reopen </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a new log file for an existing target. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>target </td></tr>
    <tr><td class="paramname">filename</td><td>may be NULL to use existing file name</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-errno</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a687531ff2f457ea5fe63dc91f74be783"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_log_filter_ctl </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="qblog_8h.html#a0bcfbbefc6d73b62e72b135ff29fe03f">qb_log_filter_conf</a>&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="qblog_8h.html#aa23b899fd898c0c999357532f187fc0f">qb_log_filter_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>low_priority</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This allows you modify the 'tags' and 'targets' callsite fields at runtime. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcclient_8c-example.html#a18">ipcclient.c</a>, <a class="el" href="ipcserver_8c-example.html#a30">ipcserver.c</a>, and <a class="el" href="simplelog_8c-example.html#a37">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a13405551d5b2504b5bdc216da6c48c9c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_log_filter_ctl2 </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="qblog_8h.html#a0bcfbbefc6d73b62e72b135ff29fe03f">qb_log_filter_conf</a>&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="qblog_8h.html#aa23b899fd898c0c999357532f187fc0f">qb_log_filter_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>high_priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>low_priority</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This extends <a class="el" href="qblog_8h.html#a687531ff2f457ea5fe63dc91f74be783" title="This allows you modify the &#39;tags&#39; and &#39;targets&#39; callsite fields at runtime. ">qb_log_filter_ctl()</a> by been able to provide a high_priority. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="simplelog_8c-example.html#a31">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a8767a0f8c8af738dfdcd7931c73c535f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_log_filter_fn_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qblog_8h.html#a93201b3c845e5933316909caf17d0a16">qb_log_filter_fn</a>&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Instead of using the <a class="el" href="qblog_8h.html#a687531ff2f457ea5fe63dc91f74be783" title="This allows you modify the &#39;tags&#39; and &#39;targets&#39; callsite fields at runtime. ">qb_log_filter_ctl()</a> functions you can apply the filters manually by defining a callback and setting the targets field using <a class="el" href="qbdefs_8h.html#a9bd8ef742f690e1e7461e48869fcf2b3">qb_bit_set()</a> and <a class="el" href="qbdefs_8h.html#a4608568d54c624c02441b1e47ba80063">qb_bit_clear()</a> like the following below: </p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">m_filter(<span class="keyword">struct</span> <a class="code" href="structqb__log__callsite.html">qb_log_callsite</a> *cs)</div>
<div class="line">{</div>
<div class="line">        <span class="keywordflow">if</span> ((cs-&gt;<a class="code" href="structqb__log__callsite.html#a24f9b029f99b46209cde29a5dd64c637">priority</a> &gt;= LOG_ALERT &amp;&amp;</div>
<div class="line">             cs-&gt;<a class="code" href="structqb__log__callsite.html#a24f9b029f99b46209cde29a5dd64c637">priority</a> &lt;= LOG_DEBUG) &amp;&amp;</div>
<div class="line">             strcmp(cs-&gt;<a class="code" href="structqb__log__callsite.html#ad24e1c82cb7dcf7eb3d7862eb5d7002d">filename</a>, <span class="stringliteral">&quot;my_c_file.c&quot;</span>) == 0) {</div>
<div class="line">                <a class="code" href="qbdefs_8h.html#a9bd8ef742f690e1e7461e48869fcf2b3">qb_bit_set</a>(cs-&gt;<a class="code" href="structqb__log__callsite.html#ab47825dd3acbb32bff816d430d992951">targets</a>, <a class="code" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa3811428d4ed722d87211411146622ad4">QB_LOG_SYSLOG</a>);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">                <a class="code" href="qbdefs_8h.html#a4608568d54c624c02441b1e47ba80063">qb_bit_clear</a>(cs-&gt;<a class="code" href="structqb__log__callsite.html#ab47825dd3acbb32bff816d430d992951">targets</a>, <a class="code" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046aa3811428d4ed722d87211411146622ad4">QB_LOG_SYSLOG</a>);</div>
<div class="line">        }</div>
<div class="line">}</div>
</div><!-- fragment --> <dl><dt><b>Examples: </b></dt><dd><a class="el" href="simplelog_8c-example.html#a28">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ad6b19c2d1c4de938418820a81d5d622c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_log_fini </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Logging system finalization function. </p>
<p>It releases any shared memory. Stops the logging thread if running. Flushes the last messages to their destinations. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcclient_8c-example.html#a26">ipcclient.c</a>, <a class="el" href="ipcserver_8c-example.html#a44">ipcserver.c</a>, and <a class="el" href="simplelog_8c-example.html#a41">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a0e8cf298ff5fd224a16537b30a899df9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_log_format_set </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the format specifiers. </p>
<p>n FUNCTION NAME f FILENAME l FILELINE p PRIORITY t TIMESTAMP T TIMESTAMP with milliseconds b BUFFER g TAGS N name (passed into qb_log_init) P PID H hostname</p>
<p>Any number between % and character specify field length to pad or chop.</p>
<dl class="section note"><dt>Note</dt><dd>Some of the fields are immediately evaluated and remembered for performance reasons, so whenlog messages carry PIDs (not the default) this function needs to be reinvoked following <code>fork</code> (<code>clone</code>) in the respective children. When already linking with <code>libpthread</code>, <code>pthread_atfork</code> callback registration could be useful. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcclient_8c-example.html#a22">ipcclient.c</a>, <a class="el" href="ipcserver_8c-example.html#a34">ipcserver.c</a>, and <a class="el" href="simplelog_8c-example.html#a29">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="aee0d199e8a04108d54896f76be4d7271"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_log_from_external_source </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>lineno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is to import logs from other code (like libraries) that provide a callback with their logs. </p>
<dl class="section note"><dt>Note</dt><dd>the performance of this will not impress you, as the filtering is done on each log message, not beforehand. So try doing basic pre-filtering.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">function</td><td>originating function name </td></tr>
    <tr><td class="paramname">filename</td><td>originating filename </td></tr>
    <tr><td class="paramname">format</td><td>format string </td></tr>
    <tr><td class="paramname">priority</td><td>this takes syslog priorities. </td></tr>
    <tr><td class="paramname">lineno</td><td>file line number </td></tr>
    <tr><td class="paramname">tags</td><td>this is a uint32_t that you can use with <a class="el" href="qblog_8h.html#a84d94e1a167006c7f69407a56db18291" title="Set the callback to map the &#39;tags&#39; bit map to a string. ">qb_log_tags_stringify_fn_set()</a> to "tag" a log message with a feature or sub-system then you can use "%g" in the format specifer to print it out. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a269b9a2d809b60b9997b4bdf42ab3500"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_log_from_external_source_va </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>lineno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>ap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a4261a1e62a9195139290b15793b8c4bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_log_init </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>facility</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>priority</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Init the logging system. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>will be passed into openlog() </td></tr>
    <tr><td class="paramname">facility</td><td>default for all new targets. </td></tr>
    <tr><td class="paramname">priority</td><td>a basic filter with this priority will be added. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipcclient_8c-example.html#a13">ipcclient.c</a>, <a class="el" href="ipcserver_8c-example.html#a28">ipcserver.c</a>, and <a class="el" href="simplelog_8c-example.html#a24">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a0f8d3c208586320bc01c76fad242ae2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_log_real_ </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a> *&#160;</td>
          <td class="paramname"><em>cs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Internal function: use <a class="el" href="qblog_8h.html#ac1dcd0ac044680eead32eae864928d71" title="This is the main function to generate a log message. ">qb_log()</a> or <a class="el" href="qblog_8h.html#a4d29d79cd6bd07e06da9fb56251922f9" title="This is the function to generate a log message if you want to manually add tags. ">qb_logt()</a> </p>

</div>
</div>
<a class="anchor" id="a617e4b5e7ea7eef40eb1c7208a9332c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_log_real_va_ </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a> *&#160;</td>
          <td class="paramname"><em>cs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>ap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a84d94e1a167006c7f69407a56db18291"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_log_tags_stringify_fn_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="qblog_8h.html#ab19163fc57662a18df611df6e4939016">qb_log_tags_stringify_fn</a>&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the callback to map the 'tags' bit map to a string. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="simplelog_8c-example.html#a27">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a03e92b00fdd8ef74fe2b93a0c8ca6512"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void qb_log_target_format </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structqb__log__callsite.html">qb_log_callsite</a> *&#160;</td>
          <td class="paramname"><em>cs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timespec *&#160;</td>
          <td class="paramname"><em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>formatted_message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output_buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Format the callsite and timestamp info according to the format. </p>
<p>set using <a class="el" href="qblog_8h.html#a0e8cf298ff5fd224a16537b30a899df9" title="Set the format specifiers. ">qb_log_format_set()</a> It is intended to be used from your custom logger function. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="simplelog_8c-example.html#a15">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ad83c4063ce34df10ade55a8eb95e3488"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* qb_log_target_user_data_get </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the user data set by either qb_log_custom_open or qb_log_target_user_data_set. </p>

</div>
</div>
<a class="anchor" id="aaafead940bad08c4132e1fc1d712297a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_log_target_user_data_set </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Associate user data with this log target. </p>
<dl class="section note"><dt>Note</dt><dd>only use this with custom targets </dd></dl>

</div>
</div>
<a class="anchor" id="a66a17b0ca1a97b04dd83d9bb21c56248"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_log_thread_priority_set </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>policy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>priority</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>When using threaded logging set the pthread policy and priority. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-errno</td><td>on error </td></tr>
    <tr><td class="paramname">0</td><td>success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa93049df374b16e48e352327d02be156"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t qb_log_thread_start </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the logging pthread. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="simplelog_8c-example.html#a40">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ad39ae5c69ec4ab889ad96a694fc5a682"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="qblog_8h.html#a461cac884ce0c9a80f069af15c6c046a">qb_log_target_slot</a>  __attribute__</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7efa5e9c7494c7d4586359300221aa5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* filename</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a6bd2bb5fcc7628a640958994a22f997c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* format</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="afa24a6ca95b4977cec3238001927aa22"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* function</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="abf2f4915fcc5d70ac361c73b683fc6ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t lineno</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0ad043071ccc7a261d79a759dc9c6f0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t priority</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac3fc73ca2f0f032be6ea70f9e9cb8837"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t tags</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="simplelog_8c-example.html#a10">simplelog.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a210bb1d2223f955a06ea3eb0a25bdb42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t targets</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
